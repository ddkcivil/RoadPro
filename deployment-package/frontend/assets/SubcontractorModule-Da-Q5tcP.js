import{c as ye,r as b,j as e,B as N,P as Z,aS as P,l as q,T as Se,E as Ce,F as Pe,H as we,ah as De,O as R,M as z,G as ke,J as Ie,ac as Ae,m as Te,aw as Fe,v as B,y as W,x as v,A as n,z as E,D as U,e as _,f as ee,h as qe,K as d,I as m,a6 as M,V as se,W as te,X as ae,Y as re,Z as S,k as ne,a8 as le,a7 as ze}from"./index-CewaSTRD.js";import{T as Ve,a as Oe,b as Q}from"./tabs-b2piEQ7z.js";import{f as w}from"./exportUtils-B5u6ZY-6.js";import{g as ce}from"./currencyUtils-RmnVW5tT.js";import{C as Re}from"./calculator-D9vHTubs.js";import{S as ie}from"./save-CV1km07e.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Je=({project:l,onProjectUpdate:D,userRole:We,settings:j})=>{var $,X,G,J,K,Y;const[k,de]=b.useState("0"),[oe,I]=b.useState(!1),[V,A]=b.useState(!1),[me,T]=b.useState(!1),[Ee,xe]=b.useState(!1),[h,L]=b.useState(null),C=(($=l.agencies)==null?void 0:$.filter(s=>s.type==="subcontractor"))||[],O=(l.agencyPayments||[]).filter(s=>s.agencyId&&C.some(a=>a.id===s.agencyId)),[t,o]=b.useState({name:"",trade:"",contactPerson:"",phone:"",email:"",address:"",status:"Active",type:"subcontractor",contractValue:0,startDate:"",endDate:"",assignedWorks:[],assetCategories:[],certification:[]}),[c,y]=b.useState({date:new Date().toISOString().split("T")[0],amount:0,reference:"",type:"Bill Payment",description:""}),[Me,ue]=b.useState({boqItemId:"",rate:0,effectiveDate:new Date().toISOString().split("T")[0],status:"Active",description:""}),g=C.find(s=>s.id===h),H=(g==null?void 0:g.rates)||[],p=s=>{ze(s)},he=()=>{o({name:"",trade:"",contactPerson:"",phone:"",email:"",address:"",status:"Active",type:"subcontractor"}),I(!0)},ge=s=>{o({id:s.id,name:s.name,trade:s.trade,contactPerson:s.contactPerson,phone:s.phone,email:s.email,address:s.address,status:s.status,type:"subcontractor"}),A(!0)},pe=s=>{var a,x;if(window.confirm("Are you sure you want to delete this subcontractor? This will also delete all associated payments.")){const f=((a=l.agencies)==null?void 0:a.filter(r=>r.id!==s))||[],i=((x=l.agencyPayments)==null?void 0:x.filter(r=>r.agencyId!==s))||[];D({...l,agencies:f,agencyPayments:i}),h===s&&L(null)}},je=()=>{var s,a,x;if(!((s=t.name)!=null&&s.trim())){p("Contractor name is required");return}if(!((a=t.trade)!=null&&a.trim())){p("Trade is required");return}if(t.contractValue&&t.contractValue<0){p("Contract value must be a positive number");return}if(t.phone&&!/^[+]?[0-9\s\-]{8,}$/.test(t.phone)){p("Please enter a valid phone number");return}if(t.email&&!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(.\w{2,3})+$/.test(t.email)){p("Please enter a valid email address");return}if(t.startDate&&t.endDate&&new Date(t.startDate)>new Date(t.endDate)){p("Start date cannot be later than end date");return}if(h){const f=((x=l.agencies)==null?void 0:x.map(r=>r.id===h?{...r,name:t.name||r.name,trade:t.trade||r.trade,contactPerson:t.contactPerson||r.contactPerson,phone:t.phone||r.phone,email:t.email||r.email,address:t.address||r.address,status:t.status||r.status,contractValue:t.contractValue??r.contractValue,startDate:t.startDate||r.startDate,endDate:t.endDate||r.endDate,type:"subcontractor",assignedWorks:t.assignedWorks,assetCategories:t.assetCategories,certification:t.certification}:r))||[];let i={...l,agencies:f};if(t.assignedWorks&&t.assignedWorks.length>0){const r=l.boq.map(u=>u.subcontractorId===h?{...u,subcontractorId:void 0}:u);i={...l,agencies:f,boq:r.map(u=>{var F;return(F=t.assignedWorks)!=null&&F.includes(u.id)?{...u,subcontractorId:h}:u})}}D(i)}else{const f={id:`sub-${Date.now()}`,name:t.name,trade:t.trade,contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",address:t.address||"",status:t.status||"Active",type:"subcontractor",contractValue:t.contractValue||0,startDate:t.startDate||"",endDate:t.endDate||"",assignedWorks:t.assignedWorks,assetCategories:t.assetCategories,certification:t.certification};let i={...l};t.assignedWorks&&t.assignedWorks.length>0&&(i={...l,boq:l.boq.map(r=>{var u;return(u=t.assignedWorks)!=null&&u.includes(r.id)?{...r,subcontractorId:f.id}:r})}),D({...i,agencies:[...l.agencies||[],f]})}I(!1),A(!1),o({name:"",trade:"",contactPerson:"",phone:"",email:"",address:"",status:"Active",type:"subcontractor",contractValue:0,startDate:"",endDate:"",assignedWorks:[],assetCategories:[],certification:[]})},fe=()=>{var a;if(!h){p("Please select a subcontractor first");return}if(!c.amount||isNaN(Number(c.amount))||Number(c.amount)<=0){p("Please enter a valid positive amount");return}if(!((a=c.reference)!=null&&a.trim())){p("Please enter a reference number");return}if(!c.date){p("Please select a payment date");return}const s={id:`pay-${Date.now()}`,subcontractorId:h,date:c.date,amount:Number(c.amount),reference:c.reference,type:c.type||"Bill Payment",description:c.description||"",status:"Confirmed"};D({...l,subcontractorPayments:[...l.subcontractorPayments||[],s]}),T(!1),y({date:new Date().toISOString().split("T")[0],amount:0,reference:"",type:"Bill Payment",description:""})},be=()=>{if(!h){p("Please select a subcontractor first");return}y({...c,subcontractorId:h}),T(!0)},Ne=s=>{const a=l.boq.filter(i=>i.subcontractorId===s),x=a.reduce((i,r)=>i+r.quantity*r.rate,0),f=a.reduce((i,r)=>i+r.completedQuantity*r.rate,0);return x>0?Math.round(f/x*100):0},ve=s=>{const a=C.find(i=>i.id===s);return((a==null?void 0:a.rates)||[]).reduce((i,r)=>{const u=l.boq.find(F=>F.id===r.boqItemId);return u?i+u.quantity*r.rate:i},0)};return e.jsxs("div",{className:"animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex justify-between mb-2 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-extrabold tracking-tight",children:"Works Execution"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subcontractor management and progress tracking"})]}),e.jsxs(N,{onClick:he,className:"px-3 py-1.5",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Add Contractor"]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden mb-2",children:[e.jsx(Ve,{value:k.toString(),onValueChange:s=>de(s),children:e.jsxs(Oe,{className:"bg-slate-50 border-b border-b-gray-200",children:[e.jsxs(Q,{value:"0",className:"flex items-center gap-2",children:[e.jsx(P,{size:18})," Subcontractors"]}),e.jsxs(Q,{value:"1",className:"flex items-center gap-2",children:[e.jsx(Re,{size:18})," Rates"]}),e.jsxs(Q,{value:"2",className:"flex items-center gap-2",children:[e.jsx(q,{size:18})," Payment Ledger"]})]})}),e.jsxs("div",{className:"p-2",children:[k==="0"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx("div",{className:"col-span-12 md:col-span-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Subcontractors"}),e.jsx(Se,{children:e.jsxs(Ce,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx("span",{className:"text-gray-500 cursor-help",children:e.jsx(Be,{size:16})})}),e.jsx(we,{children:"Manage your subcontractor partners and their assignments"})]})})]}),C.map(s=>e.jsx("div",{onClick:()=>L(s.id),className:z("cursor-pointer rounded-xl transition-all duration-200 border",h===s.id?"bg-indigo-50/20 border-primary":"bg-white border-border"),children:e.jsxs("div",{className:"p-2 flex items-center gap-2",children:[e.jsxs(De,{className:"bg-blue-100 text-blue-600",children:[" ",e.jsx(P,{size:20})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-sm",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.trade}),e.jsx("div",{className:"mt-1",children:e.jsx(R,{className:z("text-xs h-[18px]",s.status==="Active"&&"bg-green-100 text-green-800",s.status==="Suspended"&&"bg-red-100 text-red-800",(s.status==="Suspended"||s.status==="Completed")&&"bg-yellow-100 text-yellow-800"),children:s.status})})]}),e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),ge(s)},children:e.jsx(ke,{size:14})}),e.jsx(N,{variant:"ghost",size:"icon",className:"text-red-500",onClick:a=>{a.stopPropagation(),pe(s.id)},children:e.jsx(Ie,{size:14})})]})]})},s.id)),C.length===0&&e.jsxs("div",{className:"py-6 text-center text-gray-500",children:[e.jsx(P,{size:48,className:"opacity-20 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg",children:"No subcontractors registered"}),e.jsx("p",{className:"text-sm",children:"Add your first subcontractor to get started"})]})]})}),e.jsx("div",{className:"col-span-12 md:col-span-8",children:g?e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs("div",{className:"border p-3 rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-extrabold",children:g.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.trade})]}),e.jsxs(N,{size:"sm",onClick:be,children:[e.jsx(q,{size:16,className:"mr-2"}),"Record Payment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2 mb-3",children:[e.jsx("div",{className:"col-span-6 md:col-span-3",children:e.jsxs("div",{className:"border text-center py-2",children:[e.jsx(Ae,{size:16}),e.jsx("p",{className:"font-bold text-base",children:l.boq.filter(s=>s.subcontractorId===g.id).length}),e.jsx("p",{className:"text-xs",children:"BOQ Items"})]})}),e.jsx("div",{className:"col-span-6 md:col-span-3",children:e.jsxs("div",{className:"border text-center py-2",children:[e.jsx(Te,{size:16}),e.jsxs("p",{className:"font-bold text-base",children:[Ne(g.id),"%"]}),e.jsx("p",{className:"text-xs",children:"Progress"})]})}),e.jsx("div",{className:"col-span-6 md:col-span-3",children:e.jsxs("div",{className:"border text-center py-2",children:[e.jsx(q,{size:16}),e.jsx("p",{className:"font-bold text-base",children:w(ve(g.id),j||l.settings)}),e.jsx("p",{className:"text-xs",children:"Contract Value"})]})}),e.jsx("div",{className:"col-span-6 md:col-span-3",children:e.jsxs("div",{className:"border text-center py-2",children:[e.jsx(Fe,{size:16}),e.jsx("p",{className:"font-bold text-base",children:O.filter(s=>s.agencyId===g.id).reduce((s,a)=>s+a.amount,0).toLocaleString("en-US",{maximumFractionDigits:0})}),e.jsx("p",{className:"text-xs",children:"Total Paid"})]})})]}),e.jsx("h4",{className:"font-bold mb-2",children:"Assigned BOQ Items"}),e.jsxs(B,{children:[e.jsx(W,{className:"bg-slate-50",children:e.jsxs(v,{children:[e.jsx(n,{className:"font-bold",children:"Item"}),e.jsx(n,{className:"font-bold",children:"Description"}),e.jsx(n,{align:"right",className:"font-bold",children:"Quantity"}),e.jsx(n,{align:"right",className:"font-bold",children:"Rate"}),e.jsx(n,{align:"right",className:"font-bold",children:"Amount"}),e.jsx(n,{align:"right",className:"font-bold",children:"Progress"})]})}),e.jsxs(E,{children:[l.boq.filter(s=>s.subcontractorId===g.id).map(s=>e.jsxs(v,{children:[e.jsx(n,{children:e.jsx("p",{className:"text-sm font-medium",children:s.description})}),e.jsx(n,{align:"right",children:e.jsxs("p",{className:"text-sm",children:[s.quantity," ",s.unit]})}),e.jsx(n,{align:"right",children:e.jsx("p",{className:"text-sm",children:w(s.rate,j||l.settings)})}),e.jsx(n,{align:"right",children:e.jsx("p",{className:"text-sm font-bold",children:w(s.quantity*s.rate,j||l.settings)})}),e.jsx(n,{align:"right",children:e.jsxs("p",{className:"text-sm text-primary",children:[s.completedQuantity,"/",s.quantity," (",Math.round(s.completedQuantity/s.quantity*100),"%)"]})})]},s.id)),l.boq.filter(s=>s.subcontractorId===g.id).length===0&&e.jsx(v,{children:e.jsxs("td",{colSpan:6,className:"text-center p-8 px-4",children:[" ",e.jsx("p",{className:"text-sm text-muted-foreground",children:"No BOQ items assigned to this subcontractor"})]})})]})]})]})}):e.jsxs("div",{className:"py-10 text-center text-gray-500",children:[e.jsx(P,{size:60,className:"opacity-10 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg",children:"Select a subcontractor to view details"}),e.jsx("p",{className:"text-sm",children:"Choose from the list to see subcontractor information"})]})})]}),k==="1"&&e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex justify-between mb-3 items-center",children:[e.jsx("h4",{className:"text-lg font-bold",children:"Subcontractor Rates"}),e.jsxs(N,{onClick:()=>{if(!h){p("Please select a subcontractor first");return}ue({boqItemId:"",rate:0,effectiveDate:new Date().toISOString().split("T")[0],status:"Active",description:""}),xe(!0)},className:"px-3 py-1.5",children:[e.jsx(Z,{size:16,className:"mr-2"}),"Add Rate"]})]}),e.jsxs(B,{children:[e.jsx(W,{className:"bg-slate-50",children:e.jsxs(v,{children:[e.jsx(n,{className:"font-bold",children:"BOQ Item"}),e.jsx(n,{className:"font-bold",children:"Description"}),e.jsx(n,{align:"right",className:"font-bold",children:"Rate"}),e.jsx(n,{className:"font-bold",children:"Effective Date"}),e.jsx(n,{className:"font-bold",children:"Status"})]})}),e.jsxs(E,{children:[H.map(s=>{const a=l.boq.find(x=>x.id===s.boqItemId);return e.jsxs(v,{children:[e.jsx(n,{children:(a==null?void 0:a.itemNo)||"N/A"}),e.jsx(n,{children:(a==null?void 0:a.description)||s.description||"N/A"}),e.jsx(n,{align:"right",children:e.jsx("p",{className:"text-sm font-bold",children:w(s.rate,j||l.settings)})}),e.jsx(n,{children:e.jsx("p",{className:"text-sm",children:s.effectiveDate})}),e.jsx(n,{children:e.jsx(R,{className:z("text-xs h-[18px]",s.status==="Active"&&"bg-green-100 text-green-800",s.status==="Expired"&&"bg-red-100 text-red-800",s.status==="Suspended"&&"bg-yellow-100 text-yellow-800"),children:s.status})})]},s.id)}),H.length===0&&e.jsx(v,{children:e.jsx("td",{colSpan:5,className:"text-center p-8 px-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No rate records found for this subcontractor"})})})]})]})]}),k==="2"&&e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"flex justify-between mb-3 items-center",children:e.jsx("h4",{className:"text-lg font-bold",children:"Payment Transactions"})}),e.jsxs(B,{children:[e.jsx(W,{className:"bg-slate-50",children:e.jsxs(v,{children:[e.jsx(n,{className:"font-bold",children:"Date"}),e.jsx(n,{className:"font-bold",children:"Subcontractor"}),e.jsx(n,{className:"font-bold",children:"Reference"}),e.jsx(n,{className:"font-bold",children:"Amount"}),e.jsx(n,{className:"font-bold",children:"Status"})]})}),e.jsxs(E,{children:[O.map(s=>{const a=C.find(x=>x.id===s.agencyId);return e.jsxs(v,{children:[e.jsx(n,{children:e.jsx("p",{className:"text-sm",children:s.date})}),e.jsxs(n,{children:[e.jsx("p",{className:"text-sm font-medium",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a==null?void 0:a.trade})]}),e.jsx(n,{children:e.jsx("p",{className:"text-sm",children:s.reference})}),e.jsx(n,{children:e.jsx("p",{className:"text-sm font-bold",children:w(s.amount,j||l.settings)})}),e.jsx(n,{children:e.jsx(R,{className:z("text-xs h-[18px]",s.status==="Confirmed"&&"bg-green-100 text-green-800",s.status==="Draft"&&"bg-blue-100 text-blue-800"),children:s.status})})]},s.id)}),O.length===0&&e.jsx(v,{children:e.jsx("td",{colSpan:5,className:"text-center p-8 px-4",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No payment records found"})})})]})]})]})]})]}),e.jsx(U,{open:oe||V,onOpenChange:()=>{I(!1),A(!1)},children:e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsx(ee,{children:e.jsxs(qe,{className:"font-bold flex items-center gap-1.5",children:[e.jsx(P,{className:"text-indigo-600"})," ",V?"Edit Contractor":"Add New Contractor"]})}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"flex flex-col gap-3 mt-1",children:[e.jsx(d,{htmlFor:"subcontractor-name",children:"Subcontractor Name"}),e.jsx(m,{id:"subcontractor-name",value:t.name,onChange:s=>o({...t,name:s.target.value}),required:!0,placeholder:"Enter the full name of the subcontractor company"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter the full name of the subcontractor company"}),e.jsx(d,{htmlFor:"trade-service",children:"Trade/Service"}),e.jsx(m,{id:"trade-service",value:t.trade,onChange:s=>o({...t,trade:s.target.value}),required:!0}),e.jsx(d,{htmlFor:"contact-person",children:"Contact Person"}),e.jsx(m,{id:"contact-person",value:t.contactPerson,onChange:s=>o({...t,contactPerson:s.target.value})}),e.jsx(d,{htmlFor:"phone",children:"Phone"}),e.jsx(m,{id:"phone",value:t.phone,onChange:s=>o({...t,phone:s.target.value})}),e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(m,{id:"email",value:t.email,onChange:s=>o({...t,email:s.target.value})}),e.jsx(d,{htmlFor:"address",children:"Address"}),e.jsx(m,{id:"address",value:t.address,onChange:s=>o({...t,address:s.target.value}),children:e.jsx("textarea",{className:"flex h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})}),e.jsx(d,{htmlFor:"contract-value",children:"Contract Value"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:ce((j==null?void 0:j.currency)||((X=l.settings)==null?void 0:X.currency))}),e.jsx(m,{id:"contract-value",type:"number",value:t.contractValue,onChange:s=>o({...t,contractValue:Number(s.target.value)}),min:0,step:.01,className:"pl-7"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"start-date",children:"Start Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:16,className:"text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(m,{id:"start-date",type:"date",value:t.startDate,onChange:s=>o({...t,startDate:s.target.value}),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"end-date",children:"End Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:16,className:"text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(m,{id:"end-date",type:"date",value:t.endDate,onChange:s=>o({...t,endDate:s.target.value}),className:"pl-9"})]})]})]}),e.jsx(d,{htmlFor:"status",children:"Status"}),e.jsxs(se,{value:t.status,onValueChange:s=>o({...t,status:s}),children:[e.jsx(te,{id:"status",children:e.jsx(ae,{placeholder:"Select status"})}),e.jsxs(re,{children:[e.jsx(S,{value:"Active",children:"Active"}),e.jsx(S,{value:"Suspended",children:"Suspended"}),e.jsx(S,{value:"Completed",children:"Completed"})]})]}),e.jsx("h4",{className:"text-lg font-bold mt-3 text-primary",children:"Structural Assets & Works"}),e.jsx(d,{htmlFor:"assigned-works",children:"Assigned Works"}),e.jsx(m,{id:"assigned-works",value:((G=t.assignedWorks)==null?void 0:G.join(", "))||"",onChange:s=>o({...t,assignedWorks:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)}),placeholder:"Enter BOQ item IDs or work descriptions separated by commas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter BOQ item IDs or work descriptions separated by commas"}),e.jsx(d,{htmlFor:"asset-categories",children:"Asset Categories"}),e.jsx(m,{id:"asset-categories",value:((J=t.assetCategories)==null?void 0:J.join(", "))||"",onChange:s=>o({...t,assetCategories:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)}),placeholder:"e.g., Bridges, Culverts, Retaining Walls"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"e.g., Bridges, Culverts, Retaining Walls"}),e.jsx(d,{htmlFor:"certifications",children:"Certifications"}),e.jsx(m,{id:"certifications",value:((K=t.certification)==null?void 0:K.join(", "))||"",onChange:s=>o({...t,certification:s.target.value.split(",").map(a=>a.trim()).filter(a=>a)}),placeholder:"e.g., Structural Engineer License, Safety Certification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"e.g., Structural Engineer License, Safety Certification"})]})}),e.jsxs(ne,{className:"bg-slate-50 p-3 flex justify-end gap-2",children:[e.jsxs(N,{variant:"outline",onClick:()=>{I(!1),A(!1)},children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(N,{onClick:je,className:"shadow-md hover:shadow-lg",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),V?"Update":"Save"," Contractor"]})]})]})}),e.jsx(U,{open:me,onOpenChange:()=>T(!1),children:e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsxs(ee,{className:"font-bold flex items-center gap-1 bg-primary text-white p-2 rounded-t-lg",children:[e.jsx(q,{size:20,className:"text-white"})," Record Payment"]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"flex flex-col gap-3 mt-1",children:[e.jsx(d,{htmlFor:"payment-date",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:16,className:"text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(m,{id:"payment-date",type:"date",value:c.date,onChange:s=>y({...c,date:s.target.value}),className:"pl-9"})]}),e.jsx(d,{htmlFor:"amount",children:"Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:ce((j==null?void 0:j.currency)||((Y=l.settings)==null?void 0:Y.currency))}),e.jsx(m,{id:"amount",type:"number",value:c.amount,onChange:s=>y({...c,amount:parseFloat(s.target.value)||0}),min:0,step:.01,required:!0,className:"pl-7"})]}),e.jsx(d,{htmlFor:"reference-number",children:"Reference Number"}),e.jsx(m,{id:"reference-number",value:c.reference,onChange:s=>y({...c,reference:s.target.value}),required:!0}),e.jsx(d,{htmlFor:"payment-type",children:"Payment Type"}),e.jsxs(se,{value:c.type,onValueChange:s=>y({...c,type:s}),children:[e.jsx(te,{id:"payment-type",children:e.jsx(ae,{placeholder:"Select payment type"})}),e.jsxs(re,{children:[e.jsx(S,{value:"Bill Payment",children:"Bill Payment"}),e.jsx(S,{value:"Advance",children:"Advance"}),e.jsx(S,{value:"Retention",children:"Retention"}),e.jsx(S,{value:"Final Payment",children:"Final Payment"})]})]}),e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(m,{id:"description",value:c.description,onChange:s=>y({...c,description:s.target.value}),children:e.jsx("textarea",{className:"flex h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})})]})}),e.jsxs(ne,{className:"bg-gray-50 p-2 flex justify-end gap-2 rounded-b-lg",children:[e.jsxs(N,{variant:"outline",onClick:()=>T(!1),children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(N,{onClick:fe,className:"shadow-md hover:shadow-lg",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Save Payment"]})]})]})})]})};export{Je as default};
