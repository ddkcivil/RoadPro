import{c as le,r as p,j as e,B as o,n as c,t as i,ah as C,aQ as R,$,ac as T,aw as re,m as O,aE as ne,o as M,p as D,O as r,aP as E,M as H,v as g,w as f,x as l,y as a,z as b,A as t,av as ce,I as k,aJ as B,ab as Q,ag as z,P as J}from"./index-CewaSTRD.js";import{T as ie,a as de,b as S,c as L}from"./tabs-b2piEQ7z.js";import{R as xe,a as oe}from"./index-DhkzDPUm.js";import{H as he}from"./history-DhVPXOxI.js";import{P as I}from"./printer-DtXb5IMq.js";import{S as Y}from"./shield-check-BgAnWJJY.js";import{T as h}from"./triangle-alert-DCByPDj1.js";import{F as me}from"./filter-BSFQ0ETk.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=le("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),q=xe,U=oe,Re=({project:A,userRole:ue,onProjectUpdate:pe})=>{const[G,K]=p.useState("dashboard"),[n,F]=p.useState(""),[N,P]=p.useState(null),m=A.labTests||[],j=A.ncrs||[],u=A.rfis||[],x=p.useMemo(()=>{const s=m.length,V=m.filter(d=>d.result==="Pass").length,W=m.filter(d=>d.result==="Fail").length,X=s>0?Math.round(V/s*100):100,Z=j.length,_=j.filter(d=>d.status==="Open"||d.status==="Correction Pending").length,ee=j.filter(d=>d.status==="Closed").length,se=u.length,te=u.filter(d=>d.status==="Open").length,ae=u.filter(d=>d.status==="Approved"||d.status==="Closed").length;return{totalTests:s,passedTests:V,failedTests:W,passRate:X,totalNCRs:Z,openNCRs:_,closedNCRs:ee,totalRFIs:se,openRFIs:te,answeredRFIs:ae}},[m,j,u]),v=p.useMemo(()=>m.filter(s=>s.testName.toLowerCase().includes(n.toLowerCase())||s.sampleId.toLowerCase().includes(n.toLowerCase())||s.location.toLowerCase().includes(n.toLowerCase())),[m,n]),w=p.useMemo(()=>j.filter(s=>s.description.toLowerCase().includes(n.toLowerCase())||s.ncrNumber.toLowerCase().includes(n.toLowerCase())||s.location.toLowerCase().includes(n.toLowerCase())),[j,n]),y=p.useMemo(()=>u.filter(s=>s.description.toLowerCase().includes(n.toLowerCase())||s.rfiNumber.toLowerCase().includes(n.toLowerCase())||s.location.toLowerCase().includes(n.toLowerCase())),[u,n]);return e.jsxs("div",{className:"animate-in fade-in duration-500 p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-indigo-600 tracking-widest uppercase",children:"QUALITY ASSURANCE"}),e.jsx("h1",{className:"text-2xl font-black text-slate-800",children:"Quality Hub & Compliance Center"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",children:[e.jsx(he,{className:"mr-2 h-4 w-4"})," Monthly Register"]}),e.jsxs(o,{children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Export Certificate"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(c,{children:e.jsxs(i,{className:"p-4 flex items-center gap-4",children:[e.jsx(C,{className:"h-12 w-12 bg-indigo-100 text-indigo-700",children:e.jsx(R,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:"LAB TESTS"}),e.jsx("h2",{className:"text-2xl font-bold",children:x.totalTests})]})]})}),e.jsxs(c,{children:[e.jsxs(i,{className:"p-4 flex items-center gap-4",children:[e.jsx(C,{className:"h-12 w-12 bg-emerald-100 text-emerald-700",children:e.jsx(Y,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:"PASS RATE"}),e.jsxs("h2",{className:"text-2xl font-bold text-emerald-700",children:[x.passRate,"%"]})]})]}),e.jsx($,{value:x.passRate,className:"h-1.5 [&::-webkit-progress-bar]:bg-slate-200 [&::-webkit-progress-value]:bg-emerald-600 rounded-none"})]}),e.jsx(c,{className:"border-l-4 border-destructive",children:e.jsxs(i,{className:"p-4 flex items-center gap-4",children:[e.jsx(C,{className:"h-12 w-12 bg-destructive/10 text-destructive",children:e.jsx(h,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:"OPEN NCRs"}),e.jsx("h2",{className:"text-2xl font-bold text-destructive",children:x.openNCRs})]})]})}),e.jsx(c,{children:e.jsxs(i,{className:"p-4 flex items-center gap-4",children:[e.jsx(C,{className:"h-12 w-12 bg-amber-100 text-amber-700",children:e.jsx(T,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground",children:"OPEN RFIs"}),e.jsx("h2",{className:"text-2xl font-bold text-amber-700",children:x.openRFIs})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(c,{className:"h-full",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"})," Overall Quality Status"]}),e.jsx($,{value:x.passRate,className:"h-2 [&::-webkit-progress-bar]:bg-slate-200 [&::-webkit-progress-value]:bg-emerald-600 mb-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.passedTests," of ",x.totalTests," tests passed"]}),e.jsxs("div",{className:"flex justify-around mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:x.passedTests}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Passed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-destructive",children:x.totalTests-x.passedTests}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-amber-600",children:x.openNCRs}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"NCRs"})]})]})]})}),e.jsx(c,{className:"h-full",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5 text-orange-600"})," Critical Areas"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-destructive"}),"Soil Compaction: 2 failing tests"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-destructive"}),"Concrete Strength: 1 failing test"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-amber-500"}),"Asphalt Density: Monitoring"]})]})]})}),e.jsx(c,{className:"h-full",children:e.jsxs(i,{className:"p-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-emerald-600"})," Quality Trends"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Quality metrics over the last 30 days:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"h-5 w-5 text-emerald-600"}),e.jsx("p",{className:"text-sm text-emerald-600",children:"+12% improvement"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"from previous period"})]})})]}),e.jsx(c,{children:e.jsxs(ie,{value:G,onValueChange:K,children:[e.jsxs(de,{className:"grid w-full grid-cols-4 h-16",children:[e.jsxs(S,{value:"dashboard",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"})," Quality Dashboard"]}),e.jsxs(S,{value:"lab-tests",children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Lab Tests"]}),e.jsxs(S,{value:"ncrs",children:[e.jsx(h,{className:"mr-2 h-4 w-4"})," NCRs"]}),e.jsxs(S,{value:"rfis",children:[e.jsx(T,{className:"mr-2 h-4 w-4"})," RFIs"]})]}),e.jsx(L,{value:"dashboard",className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(q,{open:N==="lab-tests",onOpenChange:()=>P(s=>s==="lab-tests"?null:"lab-tests"),children:e.jsx(U,{asChild:!0,children:e.jsxs(c,{className:"relative hover:bg-slate-50",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"text-blue-600 h-5 w-5"}),e.jsx(D,{children:"Recent Lab Tests"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{children:[m.length," tests"]}),e.jsx(E,{className:H("h-4 w-4 transition-transform",N==="lab-tests"&&"rotate-180")})]})]}),e.jsx(i,{className:"p-0",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(l,{children:[e.jsx(a,{children:"Sample ID"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Result"}),e.jsx(a,{children:"Date"})]})}),e.jsx(b,{children:v.length>0?v.map(s=>e.jsxs(l,{children:[e.jsx(t,{children:s.sampleId}),e.jsx(t,{children:s.testName}),e.jsx(t,{children:s.location}),e.jsx(t,{children:e.jsx(r,{variant:s.result==="Pass"?"default":"destructive",children:s.result})}),e.jsx(t,{children:s.date})]},s.id)):e.jsx(l,{children:e.jsx(t,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No recent lab tests."})})})]})})]})})}),e.jsx(q,{open:N==="ncrs",onOpenChange:()=>P(s=>s==="ncrs"?null:"ncrs"),children:e.jsx(U,{asChild:!0,children:e.jsxs(c,{className:"relative hover:bg-slate-50",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"text-destructive h-5 w-5"}),e.jsx(D,{children:"Non-Conformance Reports"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{variant:"destructive",children:[j.length," NCRs"]}),e.jsx(E,{className:H("h-4 w-4 transition-transform",N==="ncrs"&&"rotate-180")})]})]}),e.jsx(i,{className:"p-0",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(l,{children:[e.jsx(a,{children:"NCR #"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Severity"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Date"})]})}),e.jsx(b,{children:w.length>0?w.map(s=>e.jsxs(l,{children:[e.jsx(t,{children:s.ncrNumber}),e.jsx(t,{children:s.location}),e.jsx(t,{children:e.jsx(r,{variant:s.severity==="Critical"?"destructive":s.severity==="High"?"warning":"default",children:s.severity})}),e.jsx(t,{children:e.jsx(r,{variant:s.status==="Open"?"warning":s.status==="Closed"?"default":"secondary",children:s.status})}),e.jsx(t,{children:s.dateRaised})]},s.id)):e.jsx(l,{children:e.jsx(t,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No recent NCRs."})})})]})})]})})}),e.jsx(q,{open:N==="rfis",onOpenChange:()=>P(s=>s==="rfis"?null:"rfis"),children:e.jsx(U,{asChild:!0,children:e.jsxs(c,{className:"relative hover:bg-slate-50",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"text-purple-600 h-5 w-5"}),e.jsx(D,{children:"Requests for Information"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{variant:"secondary",children:[u.length," RFIs"]}),e.jsx(E,{className:H("h-4 w-4 transition-transform",N==="rfis"&&"rotate-180")})]})]}),e.jsx(i,{className:"p-0",children:e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs(l,{children:[e.jsx(a,{children:"RFI #"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Priority"}),e.jsx(a,{children:"Date"})]})}),e.jsx(b,{children:y.length>0?y.map(s=>e.jsxs(l,{children:[e.jsx(t,{children:s.rfiNumber}),e.jsxs(t,{children:[s.description.substring(0,30),"..."]}),e.jsx(t,{children:e.jsx(r,{variant:s.status==="Open"?"warning":s.status==="Approved"?"default":"secondary",children:s.status})}),e.jsx(t,{children:e.jsx(r,{variant:s.priority==="High"?"destructive":s.priority==="Medium"?"warning":"default",children:s.priority})}),e.jsx(t,{children:s.date})]},s.id)):e.jsx(l,{children:e.jsx(t,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"No recent RFIs."})})})]})})]})})}),e.jsx(c,{children:e.jsxs(i,{className:"p-4",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-blue-600"})," Quality Insights"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4 text-emerald-500"}),"Concrete strength trending upward: Average strength increased by 15% over last week"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4 text-amber-500"}),"Soil compaction monitoring: 2 locations showing below threshold values"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-blue-500"}),"NCR closure rate improving: 75% of NCRs resolved within target timeframe"]})]})]})})]})}),e.jsxs(L,{value:"lab-tests",className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[e.jsx(k,{placeholder:"Search lab tests...",value:n,onChange:s=>F(s.target.value),className:"w-64"}),e.jsxs(o,{variant:"outline",children:[e.jsx(me,{className:"mr-2 h-4 w-4"})," Filter Results"]})]}),e.jsx(c,{children:e.jsx(i,{className:"p-0",children:e.jsx(B,{className:"h-[calc(100vh-400px)] w-full rounded-md border",children:e.jsxs(g,{children:[e.jsx(f,{className:"bg-slate-50",children:e.jsxs(l,{children:[e.jsx(a,{children:"Sample ID"}),e.jsx(a,{children:"Test Type"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Result"}),e.jsx(a,{children:"Value"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(b,{children:v.length>0?v.map(s=>e.jsxs(l,{children:[e.jsxs(t,{children:[e.jsx("p",{className:"font-bold font-mono text-indigo-700",children:s.sampleId}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.date})]}),e.jsxs(t,{children:[e.jsx("p",{className:"font-semibold",children:s.testName}),e.jsx(r,{variant:"secondary",className:"text-xs font-mono",children:s.category})]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Q,{className:"h-3 w-3"})," ",s.location]})}),e.jsxs(t,{children:[e.jsx("p",{className:"font-bold font-mono",children:s.calculatedValue}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Req: ",s.standardLimit]})]}),e.jsx(t,{children:e.jsx(r,{variant:s.result==="Pass"?"default":"destructive",className:"font-bold",children:s.result})}),e.jsx(t,{children:e.jsx(r,{variant:"outline",children:s.technician||"Unknown"})}),e.jsxs(t,{className:"text-right",children:[e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(I,{className:"h-4 w-4"})})]})]},s.id)):e.jsx(l,{children:e.jsxs(t,{colSpan:7,className:"text-center text-muted-foreground py-8",children:[e.jsx(R,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No lab test records matching your query."})]})})})]})})})})]}),e.jsxs(L,{value:"ncrs",className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[e.jsx(k,{placeholder:"Search NCRs...",value:n,onChange:s=>F(s.target.value),className:"w-64"}),e.jsxs(o,{children:[e.jsx(J,{className:"mr-2 h-4 w-4"})," New NCR"]})]}),e.jsx(c,{children:e.jsx(i,{className:"p-0",children:e.jsx(B,{className:"h-[calc(100vh-400px)] w-full rounded-md border",children:e.jsxs(g,{children:[e.jsx(f,{className:"bg-slate-50",children:e.jsxs(l,{children:[e.jsx(a,{children:"NCR #"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Severity"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Raised By"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(b,{children:w.length>0?w.map(s=>e.jsxs(l,{children:[e.jsxs(t,{children:[e.jsx("p",{className:"font-bold font-mono text-destructive",children:s.ncrNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.dateRaised})]}),e.jsxs(t,{children:[s.description.substring(0,50),"..."]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Q,{className:"h-3 w-3"})," ",s.location]})}),e.jsx(t,{children:e.jsx(r,{variant:s.severity==="Critical"?"destructive":s.severity==="High"?"warning":"default",children:s.severity})}),e.jsx(t,{children:e.jsx(r,{variant:s.status==="Open"?"warning":s.status==="Closed"?"default":"secondary",children:s.status})}),e.jsx(t,{children:e.jsx(r,{variant:"outline",children:s.raisedBy})}),e.jsxs(t,{className:"text-right",children:[e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(I,{className:"h-4 w-4"})})]})]},s.id)):e.jsx(l,{children:e.jsxs(t,{colSpan:7,className:"text-center text-muted-foreground py-8",children:[e.jsx(h,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No NCR records matching your query."})]})})})]})})})})]}),e.jsxs(L,{value:"rfis",className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[e.jsx(k,{placeholder:"Search RFIs...",value:n,onChange:s=>F(s.target.value),className:"w-64"}),e.jsxs(o,{children:[e.jsx(J,{className:"mr-2 h-4 w-4"})," New RFI"]})]}),e.jsx(c,{children:e.jsx(i,{className:"p-0",children:e.jsx(B,{className:"h-[calc(100vh-400px)] w-full rounded-md border",children:e.jsxs(g,{children:[e.jsx(f,{className:"bg-slate-50",children:e.jsxs(l,{children:[e.jsx(a,{children:"RFI #"}),e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Priority"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Requested By"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(b,{children:y.length>0?y.map(s=>e.jsxs(l,{children:[e.jsxs(t,{children:[e.jsx("p",{className:"font-bold font-mono text-purple-700",children:s.rfiNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.date})]}),e.jsxs(t,{children:[s.description.substring(0,50),"..."]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(Q,{className:"h-3 w-3"})," ",s.location]})}),e.jsx(t,{children:e.jsx(r,{variant:s.priority==="High"?"destructive":s.priority==="Medium"?"warning":"default",children:s.priority})}),e.jsx(t,{children:e.jsx(r,{variant:s.status==="Open"?"warning":s.status==="Approved"?"default":"secondary",children:s.status})}),e.jsx(t,{children:e.jsx(r,{variant:"outline",children:s.requestedBy})}),e.jsxs(t,{className:"text-right",children:[e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",children:e.jsx(I,{className:"h-4 w-4"})})]})]},s.id)):e.jsx(l,{children:e.jsxs(t,{colSpan:7,className:"text-center text-muted-foreground py-8",children:[e.jsx(T,{className:"h-12 w-12 text-muted-foreground mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No RFI records matching your query."})]})})})]})})})})]})]})})]})};export{Re as default};
