import{c as w,r as t,j as e,B as x,aH as Q,P as K,n,ac as X,t as c,v as k,w as C,x as m,y as a,z as I,A as l,O as p,G as A,J as Y,u as _,I as ee}from"./index-CewaSTRD.js";import{T as se,a as te,b as M}from"./tabs-b2piEQ7z.js";import{S as ae}from"./shopping-cart-CrE7RZOM.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=w("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=w("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=w("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),Le=({project:N,onProjectUpdate:ie,userRole:ce})=>{const[j,H]=t.useState("0"),[de,L]=t.useState(!1),[oe,O]=t.useState({itemName:"",quantity:0,unit:"unit",reorderLevel:10,location:"Warehouse"}),[xe,T]=t.useState(null),[v,V]=t.useState(""),[he,z]=t.useState(!1),[ue,q]=t.useState(null),[me,P]=t.useState({name:"",category:"",unit:"",quantity:0,availableQuantity:0,unitCost:0,reorderLevel:10,location:"Warehouse",status:"Available",criticality:"Medium"}),[je,F]=t.useState(!1),[ve,ge]=t.useState(!1),[pe,Ne]=t.useState(null),[ye,fe]=t.useState({poNumber:`PO-${Date.now().toString().slice(-6)}`,vendor:"",date:new Date().toISOString().split("T")[0],items:[]}),[be,R]=t.useState(!1),[Me,E]=t.useState(!1),[Se,D]=t.useState(null),[ke,W]=t.useState({plateNumber:"",type:"",status:"Active",driver:"",agencyId:"",chainage:"",gpsLocation:void 0}),[Ce,B]=t.useState(null),h=N.inventory||[],o=N.materials||[],U=N.purchaseOrders||[],u=N.vehicles||[],y=t.useMemo(()=>{const s=h.filter(r=>r.quantity<=r.reorderLevel),i=h.filter(r=>r.quantity>r.reorderLevel&&r.quantity<=r.reorderLevel*1.5),g=h.length-s.length-i.length,d=h.reduce((r,b)=>r+(b.unitCost||0)*b.quantity,0);return{critical:s,warning:i,healthy:g,totalValue:d}},[h]),f=t.useMemo(()=>{const s=o.length,i=o.filter(r=>r.availableQuantity<=r.reorderLevel).length,g=o.filter(r=>r.availableQuantity===0).length,d=o.reduce((r,b)=>r+(b.totalValue||0),0);return{totalMaterials:s,lowStock:i,outOfStock:g,totalValue:d}},[o]),S=t.useMemo(()=>{const s=u.filter(d=>d.status==="Active"),i=u.filter(d=>d.status==="Maintenance"),g=u.filter(d=>d.status==="Idle");return{active:s,maintenance:i,idle:g}},[u]),G=t.useMemo(()=>o.filter(s=>{var i;return s.name.toLowerCase().includes(v.toLowerCase())||((i=s.category)==null?void 0:i.toLowerCase().includes(v.toLowerCase()))||s.location.toLowerCase().includes(v.toLowerCase())}),[o,v]),J=()=>{O({itemName:"",quantity:0,unit:"unit",reorderLevel:10,location:"Warehouse"}),T(null),L(!0)},Z=()=>{P({name:"",category:"",unit:"",quantity:0,availableQuantity:0,unitCost:0,reorderLevel:10,location:"Warehouse",status:"Available",criticality:"Medium"}),q(null),z(!0)},$=(s,i)=>s<=i?"destructive":s<=i*1.5?"secondary":"default";return e.jsxs("div",{className:"h-[calc(100vh-140px)] overflow-y-auto p-2",children:[e.jsxs("div",{className:"flex justify-between mb-6 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-extrabold tracking-tight",children:"Resource Management Hub"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unified inventory, materials, assets, and procurement management"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",onClick:J,children:[e.jsx(Q,{size:16,className:"mr-2"}),"Add Inventory"]}),e.jsxs(x,{variant:"outline",onClick:()=>F(!0),children:[e.jsx(ae,{size:16,className:"mr-2"}),"New PO"]}),e.jsxs(x,{onClick:Z,children:[e.jsx(K,{size:16,className:"mr-2"}),"Add Material"]})]})]}),e.jsxs(n,{className:"rounded-xl",children:[e.jsx(se,{value:j,onValueChange:H,className:"border-b",children:e.jsxs(te,{children:[e.jsxs(M,{value:"0",children:[e.jsx(re,{size:16,className:"mr-2"}),"Inventory (",h.length,")"]}),e.jsxs(M,{value:"1",children:[e.jsx(Q,{size:16,className:"mr-2"}),"Materials (",o.length,")"]}),e.jsxs(M,{value:"2",children:[e.jsx(X,{size:16,className:"mr-2"}),"Purchase Orders (",U.length,")"]}),e.jsxs(M,{value:"3",children:[e.jsx(le,{size:16,className:"mr-2"}),"Assets (",u.length,")"]})]})}),e.jsxs("div",{className:"p-6",children:[j==="0"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.critical.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Critical Stock"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.warning.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Low Stock"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.healthy}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Healthy Stock"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["₹",y.totalValue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"})]})})]}),e.jsx(n,{children:e.jsxs(k,{children:[e.jsx(C,{children:e.jsxs(m,{children:[e.jsx(a,{children:"Item"}),e.jsx(a,{children:"Quantity"}),e.jsx(a,{children:"Unit"}),e.jsx(a,{children:"Reorder Level"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(I,{children:h.map(s=>e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:s.itemName||s.name}),e.jsx(l,{children:s.quantity}),e.jsx(l,{children:s.unit}),e.jsx(l,{children:s.reorderLevel}),e.jsx(l,{children:s.location}),e.jsx(l,{children:e.jsx(p,{variant:$(s.quantity,s.reorderLevel),children:s.quantity<=s.reorderLevel?"Critical":s.quantity<=s.reorderLevel*1.5?"Low":"Healthy"})}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{O({id:s.id,itemName:s.itemName||s.name||"",quantity:s.quantity,unit:s.unit,reorderLevel:s.reorderLevel,location:s.location}),T(s.id),L(!0)},children:[e.jsx(A,{size:16,className:"mr-1"}),"Edit"]}),e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(Y,{size:16,className:"mr-1"}),"Delete"]})]})})]},s.id))})]})})]}),j==="1"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(_,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(ee,{placeholder:"Search materials...",value:v,onChange:s=>V(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.totalMaterials}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Materials"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:f.lowStock}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Low Stock"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:f.outOfStock}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Out of Stock"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["₹",f.totalValue.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Value"})]})})]}),e.jsx(n,{children:e.jsxs(k,{children:[e.jsx(C,{children:e.jsxs(m,{children:[e.jsx(a,{children:"Material"}),e.jsx(a,{children:"Category"}),e.jsx(a,{children:"Available"}),e.jsx(a,{children:"Unit Cost"}),e.jsx(a,{children:"Location"}),e.jsx(a,{children:"Status"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(I,{children:G.map(s=>{var i;return e.jsxs(m,{children:[e.jsx(l,{className:"font-medium",children:s.name}),e.jsx(l,{children:e.jsx(p,{variant:"outline",children:s.category})}),e.jsxs(l,{children:[s.availableQuantity," ",s.unit]}),e.jsxs(l,{children:["₹",(i=s.unitCost)==null?void 0:i.toLocaleString()]}),e.jsx(l,{children:s.location}),e.jsx(l,{children:e.jsx(p,{variant:s.status==="Available"?"default":"secondary",children:s.status})}),e.jsx(l,{className:"text-right",children:e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{P(s),q(s.id),z(!0)},children:[e.jsx(A,{size:16,className:"mr-1"}),"Edit"]})})]},s.id)})})]})})]}),j==="2"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Purchase Orders"}),e.jsx(n,{className:"p-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Purchase Order management interface would be implemented here"})})]}),j==="3"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:S.active.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Assets"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:S.maintenance.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Maintenance"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:S.idle.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Idle Assets"})]})}),e.jsx(n,{children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Assets"})]})})]}),e.jsx(n,{children:e.jsxs(k,{children:[e.jsx(C,{children:e.jsxs(m,{children:[e.jsx(a,{children:"Asset"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Driver"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Chainage"}),e.jsx(a,{className:"text-right",children:"Actions"})]})}),e.jsx(I,{children:u.map(s=>e.jsxs(m,{children:[e.jsx(l,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.plateNumber}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",s.id]})]})}),e.jsx(l,{children:e.jsx(p,{variant:"outline",children:s.type})}),e.jsx(l,{children:s.driver}),e.jsx(l,{children:e.jsx(p,{variant:s.status==="Active"?"default":s.status==="Maintenance"?"secondary":"outline",children:s.status})}),e.jsx(l,{children:s.chainage}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{D(s),E(!0)},children:[e.jsx(ne,{size:16,className:"mr-1"}),"QR Code"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>{W(s),B(s.id),R(!0)},children:[e.jsx(A,{size:16,className:"mr-1"}),"Edit"]})]})})]},s.id))})]})})]})]})]})]})};export{Le as default};
