import{c as ve,r as c,aa as x,j as e,B as h,a8 as de,K as n,ab as Ue,M as v,I as p,ac as F,V as w,W as T,X as I,Y as E,Z as o,U as L,ad as D,O as b,ae as me,P as A,C as xe,af as ue,v as he,y as pe,x as k,A as a,z as ge,J as Q,Q as _e,T as fs,E as vs,F as bs,$ as Je,H as Ns,ag as ys,D as ks,e as Cs,f as Ss,ah as ws,n as Ge,ai as Ts}from"./index-CewaSTRD.js";import{T as Is,a as Es,b as Xe}from"./tabs-b2piEQ7z.js";import{C as Ds}from"./checkbox-CDN6qADh.js";import{S as N}from"./StatCard-Di6peEL8.js";import{C as je}from"./circle-check-ClQeHiCK.js";import{S as Ye}from"./shield-check-BgAnWJJY.js";import{P as fe}from"./pen-DxURiB25.js";import{F as As}from"./filter-BSFQ0ETk.js";import{C as Ze}from"./clock-CdXHNXMZ.js";import{C as es}from"./circle-x-BmcPxhfw.js";import{P as Rs}from"./printer-DtXb5IMq.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=ve("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ve("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ve("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Ys=({project:r,userRole:M,onProjectUpdate:z})=>{var We,Qe,Me,Ve,$e;const[V,j]=c.useState("LIST"),[i,C]=c.useState({}),[R,O]=c.useState(null),[l,ts]=c.useState(null),[as,$]=c.useState(!1),[B,is]=c.useState("all"),[H,ls]=c.useState("0"),[be,K]=c.useState(""),[Ne,U]=c.useState("First"),[ye,_]=c.useState(""),[ke,J]=c.useState(""),[Ce,G]=c.useState(""),[Se,X]=c.useState(""),[we,Y]=c.useState(""),[Te,Z]=c.useState(""),[Ie,ee]=c.useState(""),[Ee,se]=c.useState([]),[De,te]=c.useState(""),[Ae,ae]=c.useState(""),[Re,ie]=c.useState(""),[Fe,le]=c.useState(""),[Le,ne]=c.useState(""),[Pe,re]=c.useState(""),[ze,ce]=c.useState(""),[d,y]=c.useState({}),[Ps,zs]=c.useState({}),[Os,Bs]=c.useState(null),[qs,Ws]=c.useState(!1),q={[x.OPEN]:r.rfis.filter(s=>s.status===x.OPEN).length,[x.APPROVED]:r.rfis.filter(s=>s.status===x.APPROVED).length,[x.REJECTED]:r.rfis.filter(s=>s.status===x.REJECTED).length,[x.CLOSED]:r.rfis.filter(s=>s.status===x.CLOSED).length},Oe=c.useMemo(()=>[...r.rfis].filter(s=>B==="all"||s.linkedTaskId===B).sort((s,t)=>new Date(t.date).getTime()-new Date(s.date).getTime()),[r.rfis,B]),W=[{id:"setting-out",name:"Setting out/Survey check (Parapet wall)",category:"Quality",description:"Checklist for setting out and survey verification of parapet walls"},{id:"material-testing",name:"Material testing and Sampling",category:"Quality",description:"Checklist for material testing and sampling procedures"},{id:"excavation-structures",name:"Excavation for Structures",category:"Quality",description:"Checklist for excavation work for structures"},{id:"roadway-excavation",name:"Roadway Excavation",category:"Quality",description:"Checklist for roadway excavation work"},{id:"embankment-filling",name:"Embankment filling",category:"Quality",description:"Checklist for embankment filling work"},{id:"borrow-material",name:"Embankment filling with Borrow material",category:"Quality",description:"Checklist for embankment filling with borrowed materials"},{id:"dry-stone-soling",name:"Dry Stone Soling",category:"Quality",description:"Checklist for dry stone soling work"},{id:"pcc-rrm",name:"PCC M15 RRM work",category:"Quality",description:"Checklist for PCC M15 RRM work"},{id:"box-culvert-formwork",name:"Formwork (Box culvert raft & wall upto 0.25m)",category:"Quality",description:"Checklist for formwork work on box culvert raft and walls"},{id:"box-culvert-reinforcement",name:"Reinforcement Work (Box culvert raft & wall upto 0.25m)",category:"Quality",description:"Checklist for reinforcement work on box culvert raft and walls"},{id:"box-culvert-concreting",name:"Concreting (Box culvert raft & wall upto 0.25m)",category:"Quality",description:"Checklist for concreting work on box culvert raft and walls"},{id:"slope-protection",name:"Slope Protection Work",category:"Quality",description:"Checklist for slope protection work"},{id:"bio-engineering",name:"Bio-Engineering Work",category:"Environmental",description:"Checklist for bio-engineering work"},{id:"electrical-work",name:"Electrical work",category:"Electrical",description:"Checklist for electrical work"},{id:"sub-grade",name:"Sub Grade Work",category:"Pavement",description:"Checklist for sub grade work"},{id:"sub-base",name:"Sub Base work",category:"Pavement",description:"Checklist for sub base work"},{id:"base-work",name:"Base Work",category:"Pavement",description:"Checklist for base work"},{id:"prime-coat",name:"Prime Coat",category:"Pavement",description:"Checklist for prime coat application"},{id:"tack-coat",name:"Tack Coat/DBM",category:"Pavement",description:"Checklist for tack coat or DBM application"},{id:"asphalt-tack-coat",name:"Tack Coat/Asphalt",category:"Pavement",description:"Checklist for asphalt tack coat application"}],f=r.checklists||[],ns=s=>{const t=/^\d+\+\d{3}\s+(LHS|RHS|Both|Both Sides|L|R)$/i;return s?t.test(s.trim()):!1},rs=()=>{C({rfiNumber:`RFI-${Date.now().toString().slice(-6)}`,status:x.OPEN,date:new Date().toISOString().split("T")[0],inspectionPurpose:"First",workflowLog:[{stage:"Created",user:M,timestamp:new Date().toISOString(),comments:"Initial request generated by field team."}]}),O(null),j("UPDATE"),K(""),U("First"),_(""),J(""),G(""),X(""),Y(""),Z(""),ee(""),se([]),te(""),ae(""),ie(""),le(""),ne(""),re(""),ce("")},cs=s=>{C(s),O(null),j("UPDATE"),K(s.inspectionTime||""),U(s.inspectionPurpose||"First"),_(s.inspectionReport||""),J(s.engineerComments||""),G(s.areSignature||""),X(s.iowSignature||""),Y(s.meSltSignature||""),Z(s.reSignature||""),ee(s.requestNumber||""),se(s.workingDrawings||[]),te(s.inspectionType||""),ae(s.specificWorkDetails||""),ie(s.inspectionDate||""),le(s.engineerRepresentativeComments||""),ne(s.worksStatus||""),re(s.submittedBy||""),ce(s.receivedBy||"")},os=()=>{if(!i.description||!i.location)return;if(!ns(i.location)){O("Required format: 'Chainage + Side' (e.g., 12+400 RHS)");return}const s=new Date().toISOString(),t=r.rfis.find(S=>S.id===i.id);let m=[...i.workflowLog||[]];t&&t.status!==i.status&&m.push({stage:i.status,user:M,timestamp:s,comments:`Status transitioned from ${t.status} to ${i.status}.`});const u={id:i.id||`rfi-${Date.now()}`,rfiNumber:i.rfiNumber||`RFI-${Date.now()}`,date:i.date,location:i.location,description:i.description,status:i.status||x.OPEN,requestedBy:i.requestedBy||M,inspectionDate:i.inspectionDate||Re,inspectionTime:be,inspectionPurpose:Ne,inspectionReport:ye,engineerComments:ke,areSignature:Ce,iowSignature:Se,meSltSignature:we,reSignature:Te,requestNumber:Ie,workingDrawings:Ee,submittedBy:i.submittedBy||Pe,receivedBy:i.receivedBy||ze,submittedDate:i.submittedDate,receivedDate:i.receivedDate,workflowLog:m,linkedTaskId:i.linkedTaskId,linkedChecklistIds:i.linkedChecklistIds||[],inspectionType:De,specificWorkDetails:Ae,engineerRepresentativeComments:Fe,worksStatus:Le},g=i.id?r.rfis.map(S=>S.id===i.id?u:S):[...r.rfis,u];z({...r,rfis:g}),j("LIST"),C({})},ds=s=>{var t;if(window.confirm("Are you sure you want to delete this RFI? This action cannot be undone and will unlink it from any associated schedule tasks.")){const m=((t=r.structures)==null?void 0:t.map(g=>{var He;const S=(He=g.components)==null?void 0:He.map(Ke=>{const gs=Ke.workLogs.filter(js=>js.rfiId!==s);return{...Ke,workLogs:gs}});return{...g,components:S}}))||r.structures,u=r.rfis.filter(g=>g.id!==s);z({...r,rfis:u,structures:m})}},oe=()=>{y({name:"",category:"Quality",description:"",items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,applicableTo:["structure","task","site"]}),j("CHECKLIST_UPDATE")},Be=s=>{y(s),j("CHECKLIST_UPDATE")},ms=()=>{if(!d.name)return;const s={id:d.id||`cl-${Date.now()}`,name:d.name,category:d.category||"Quality",description:d.description||"",items:d.items||[],createdAt:d.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:d.isActive!==void 0?d.isActive:!0,assignedTo:d.assignedTo,applicableTo:d.applicableTo},t=r.checklists?[...r.checklists.filter(m=>m.id!==s.id),s]:[s];z({...r,checklists:t}),j("CHECKLIST_LIST"),y({})},qe=s=>{var t;if(window.confirm("Are you sure you want to delete this checklist? This action cannot be undone and will unlink it from any associated RFIs.")){const m=r.rfis.map(g=>g.linkedChecklistIds&&g.linkedChecklistIds.includes(s)?{...g,linkedChecklistIds:g.linkedChecklistIds.filter(S=>S!==s)}:g),u=((t=r.checklists)==null?void 0:t.filter(g=>g.id!==s))||[];z({...r,rfis:m,checklists:u})}},xs=()=>{var t;const s={id:`item-${Date.now()}`,title:"",description:"",required:!0,valueType:"boolean",order:(((t=d.items)==null?void 0:t.length)||0)+1};y({...d,items:[...d.items||[],s]})},P=(s,t,m)=>{const u=[...d.items||[]];u[s]={...u[s],[t]:m},y({...d,items:u})},us=s=>{const t=[...d.items||[]];t.splice(s,1),y({...d,items:t})},hs=s=>{switch(s.toLowerCase()){case"created":return e.jsx(A,{size:14,className:"text-blue-500"});case"approved":return e.jsx(je,{size:14,className:"text-emerald-500"});case"rejected":return e.jsx(es,{size:14,className:"text-rose-500"});case"inspected":return e.jsx(ss,{size:14,className:"text-amber-500"});case"open":return e.jsx(Ze,{size:14,className:"text-indigo-500"});default:return e.jsx(Ts,{size:14,className:"text-slate-400"})}},ps=()=>e.jsxs(Ge,{className:"p-6 rounded-xl animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Checklist Template Editor"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create or edit checklist templates"})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>j("CHECKLIST_LIST"),children:e.jsx(de,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"template-name",children:"Template Name"}),e.jsx(p,{id:"template-name",value:d.name||"",onChange:s=>y({...d,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"category",children:"Category"}),e.jsxs(w,{value:d.category||"Quality",onValueChange:s=>y({...d,category:s}),children:[e.jsx(T,{id:"category",children:e.jsx(I,{placeholder:"Select category"})}),e.jsxs(E,{children:[e.jsx(o,{value:"Quality",children:"Quality"}),e.jsx(o,{value:"Safety",children:"Safety"}),e.jsx(o,{value:"Environmental",children:"Environmental"})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(L,{id:"description",className:"flex h-24 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.description||"",onChange:s=>y({...d,description:s.target.value})})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h6",{className:"text-lg font-bold",children:"Checklist Items"}),e.jsxs(h,{variant:"outline",onClick:xs,children:[e.jsx(A,{size:16,className:"mr-2"})," Add Item"]})]}),(d.items||[]).map((s,t)=>{var m;return e.jsxs(Ge,{className:"p-4 mb-4 border rounded-xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:`item-title-${t}`,children:"Item Title"}),e.jsx(p,{id:`item-title-${t}`,value:s.title||"",onChange:u=>P(t,"title",u.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:`response-type-${t}`,children:"Response Type"}),e.jsxs(w,{value:s.valueType||"boolean",onValueChange:u=>P(t,"valueType",u),children:[e.jsx(T,{id:`response-type-${t}`,children:e.jsx(I,{placeholder:"Select response type"})}),e.jsxs(E,{children:[e.jsx(o,{value:"boolean",children:"Yes/No"}),e.jsx(o,{value:"number",children:"Numeric"}),e.jsx(o,{value:"text",children:"Text"}),e.jsx(o,{value:"select",children:"Dropdown"})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx(n,{htmlFor:`item-description-${t}`,children:"Description"}),e.jsx(p,{id:`item-description-${t}`,value:s.description||"",onChange:u=>P(t,"description",u.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2 col-span-1",children:[e.jsx(Ds,{id:`item-required-${t}`,checked:s.required||!1,onCheckedChange:u=>P(t,"required",u)}),e.jsx(n,{htmlFor:`item-required-${t}`,children:"Required"})]}),e.jsx("div",{className:"col-span-1 flex justify-end",children:e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>us(t),children:e.jsx(Q,{size:16})})})]}),s.valueType==="select"&&e.jsxs("div",{className:"col-span-1 md:col-span-2 mt-4",children:[e.jsx(n,{htmlFor:`options-${t}`,children:"Options (comma separated)"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{id:`options-${t}`,value:((m=s.options)==null?void 0:m.join(", "))||"",onChange:u=>P(t,"options",u.target.value.split(",").map(g=>g.trim()))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter options separated by commas"})]})]})]},t)})]})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(h,{variant:"outline",onClick:()=>j("CHECKLIST_LIST"),children:"Cancel"}),e.jsxs(h,{onClick:ms,children:[e.jsx(je,{size:18,className:"mr-2"})," Save Template"]})]})]});return V==="CHECKLIST_UPDATE"?ps():V==="UPDATE"?e.jsxs("div",{className:"p-4 rounded-xl animate-in slide-in-from-right duration-300 border bg-background",children:[" ",e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[" ",e.jsxs("div",{children:[" ",e.jsx("h3",{className:"text-lg font-bold",children:"Technical Inspection Request"})," ",e.jsx("p",{className:"text-sm text-muted-foreground",children:"Project Quality Verification Form"})," "]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>j("LIST"),children:e.jsx(de,{})})," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[" ",e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"rfi-location",children:"Location (Chainage + Side)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{size:18,className:v("absolute left-3 top-1/2 -translate-y-1/2",R?"text-rose-500":"text-indigo-500")}),e.jsx(p,{id:"rfi-location",placeholder:"e.g. 12+400 RHS",value:i.location||"",onChange:s=>{C({...i,location:s.target.value}),R&&O(null)},required:!0,className:v("pl-9",R&&"border-rose-500")})]}),R&&e.jsx("p",{className:"text-sm text-rose-500 mt-1",children:R}),!R&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Format: [Km]+[Mtrs] [Side] e.g. 12+400 RHS"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"request-number",children:"Request Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"request-number",placeholder:"e.g. RFI-001",value:Ie||"",onChange:s=>ee(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"inspection-type",children:"Inspection Type"}),e.jsxs("div",{className:"relative",children:[e.jsx(F,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"inspection-type",placeholder:"e.g. Box Culvert, Earthwork, etc.",value:De||"",onChange:s=>te(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"inspection-date",children:"Inspection Date"}),e.jsx(p,{id:"inspection-date",type:"date",value:Re||"",onChange:s=>ie(s.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"request-date",children:"Request Date"}),e.jsx(p,{id:"request-date",type:"date",value:i.date||"",onChange:s=>C({...i,date:s.target.value})})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"inspection-time",children:"Inspection Time"}),e.jsx(p,{id:"inspection-time",type:"time",value:be||"",onChange:s=>K(s.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"inspection-purpose",children:"Inspection Purpose"}),e.jsxs(w,{value:Ne,onValueChange:s=>U(s),children:[e.jsx(T,{id:"inspection-purpose",children:e.jsx(I,{placeholder:"Select purpose"})}),e.jsxs(E,{children:[e.jsx(o,{value:"First",children:"First Inspection"}),e.jsx(o,{value:"Second",children:"Second Inspection"}),e.jsx(o,{value:"Third",children:"Third Inspection"}),e.jsx(o,{value:"Routine",children:"Routine Inspection"}),e.jsx(o,{value:"Special",children:"Special Inspection"}),e.jsx(o,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"update-status",children:"Update Status"}),e.jsxs(w,{value:i.status||x.OPEN,onValueChange:s=>C({...i,status:s}),children:[e.jsx(T,{id:"update-status",children:e.jsx(I,{placeholder:"Select status"})}),e.jsxs(E,{children:[e.jsx(o,{value:x.OPEN,children:"Open / Pending Inspection"}),e.jsx(o,{value:x.APPROVED,children:"Approved / Verified"}),e.jsx(o,{value:x.REJECTED,children:"Rejected / Rectification Needed"}),e.jsx(o,{value:x.CLOSED,children:"Closed"})]})]})]}),e.jsxs("div",{className:"col-span-2",children:[" ",e.jsx(n,{htmlFor:"work-description",children:"Work Description for Inspection"}),e.jsx(L,{id:"work-description",className:"flex h-24 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Define scope for verification (e.g. Reinforcement, GSB Layer, BC Mix)...",value:i.description||"",onChange:s=>C({...i,description:s.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[" ",e.jsx(n,{htmlFor:"specific-work-details",children:"Specific Work Details"}),e.jsx(L,{id:"specific-work-details",className:"flex h-24 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Provide detailed information about particular work items...",value:Ae||"",onChange:s=>ae(s.target.value)})]}),e.jsxs("div",{className:"col-span-2",children:[" ",e.jsx(n,{htmlFor:"inspection-report",children:"Inspection Report"}),e.jsx(L,{id:"inspection-report",className:"flex h-24 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Record findings and observations from the inspection...",value:ye||"",onChange:s=>_(s.target.value)})]}),e.jsxs("div",{className:"col-span-2",children:[" ",e.jsx(n,{htmlFor:"engineer-comments",children:"Engineer's Representative Comments"}),e.jsx(L,{id:"engineer-comments",className:"flex h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Add any comments or observations from the engineer...",value:ke||"",onChange:s=>J(s.target.value)})]}),e.jsxs("div",{className:"col-span-2",children:[" ",e.jsx(n,{htmlFor:"engineer-representative-comments",children:"Engineer Representative's Comments"}),e.jsx(L,{id:"engineer-representative-comments",className:"flex h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Comments from the engineer representative...",value:Fe||"",onChange:s=>le(s.target.value)})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"works-status",children:"Works Status"}),e.jsxs(w,{value:Le,onValueChange:s=>ne(s),children:[e.jsx(T,{id:"works-status",children:e.jsx(I,{placeholder:"Select Status"})}),e.jsxs(E,{children:[e.jsx(o,{value:"",children:"Select Status"}),e.jsx(o,{value:"Approved",children:"Approved"}),e.jsx(o,{value:"Approved as Noted",children:"Approved as Noted"}),e.jsx(o,{value:"Approved for Subsequent Work",children:"Approved for Subsequent Work"})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"are-iow-signature",children:"ARE/IOW Signature"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"are-iow-signature",placeholder:"Enter signature details",value:Ce||"",onChange:s=>G(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"me-slt-signature",children:"ME/SLT Signature"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"me-slt-signature",placeholder:"Enter signature details",value:we||"",onChange:s=>Y(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"iow-signature",children:"IOW Signature"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"iow-signature",placeholder:"Enter signature details",value:Se||"",onChange:s=>X(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"re-signature",children:"RE Signature"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"re-signature",placeholder:"Enter signature details",value:Te||"",onChange:s=>Z(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"submitted-by",children:"Submitted By"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"submitted-by",placeholder:"Name of person submitting the RFI",value:Pe||"",onChange:s=>re(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"received-by",children:"Received By"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"received-by",placeholder:"Name of person receiving the RFI",value:ze||"",onChange:s=>ce(s.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"linked-task",children:"Link to Schedule Task"}),e.jsxs(w,{value:i.linkedTaskId||"",onValueChange:s=>C({...i,linkedTaskId:s}),children:[e.jsxs(T,{id:"linked-task",className:"pl-9",children:[e.jsx(Ls,{size:18,className:"text-indigo-600 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(I,{placeholder:"Bind this inspection to an activity..."})]}),e.jsxs(E,{children:[e.jsx(o,{value:"",children:"None"}),r.schedule.map(s=>e.jsxs(o,{value:s.id,children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("h4",{className:"font-bold",children:s.name}),e.jsxs(b,{variant:"outline",children:[s.progress,"%"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.startDate," to ",s.endDate]})]},s.id))]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"linked-checklists",children:"Linked Checklists"}),e.jsxs(w,{value:((We=i.linkedChecklistIds)==null?void 0:We[0])||"",onValueChange:s=>C({...i,linkedChecklistIds:s?[s]:[]}),children:[e.jsxs(T,{id:"linked-checklists",className:"pl-9",children:[e.jsx(me,{size:18,className:"text-indigo-600 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(I,{placeholder:"Select associated checklists..."})]}),e.jsx(E,{children:(Qe=r.checklists)==null?void 0:Qe.map(s=>e.jsxs(o,{value:s.id,children:[s.name," (",s.category,")"]},s.id))})]}),i.linkedChecklistIds&&i.linkedChecklistIds.length>1&&e.jsx("p",{className:"text-sm text-yellow-600 mt-1",children:"Only the first linked checklist is shown. Multi-select requires custom component."})]}),e.jsxs("div",{className:"col-span-1 md:col-span-1",children:[" ",e.jsx(n,{htmlFor:"working-drawings",children:"Working Drawings Attachment"}),e.jsxs("div",{className:"relative",children:[e.jsx(ss,{size:18,className:"text-indigo-500 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(p,{id:"working-drawings",placeholder:"Upload or reference working drawings",value:Ee.join(", ")||"",onChange:s=>se(s.target.value.split(",").map(t=>t.trim())),className:"pl-9"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Separate multiple drawing references with commas"})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[" ",e.jsx(h,{variant:"outline",onClick:()=>{j("LIST"),C({})},children:"Back"}),e.jsxs(h,{onClick:os,className:"shadow-md",children:[" ",e.jsx(je,{size:18,className:"mr-2"})," Commit Audit Log"]})]})]}):V==="CHECKLIST_LIST"?e.jsxs("div",{className:"animate-in fade-in duration-500",children:[" ",e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[" ",e.jsxs("div",{children:[" ",e.jsx("h3",{className:"text-2xl font-extrabold",children:"Quality Checklists"})," ",e.jsx("p",{className:"text-sm text-muted-foreground",children:"Verification of works against quality standards"})," "]}),e.jsxs("div",{className:"flex space-x-2 items-center",children:[" ",e.jsxs(h,{onClick:oe,className:"rounded-md shadow-md",children:[" ",e.jsx(A,{className:"mr-2"}),"New Checklist"]}),e.jsxs(h,{variant:"outline",onClick:()=>j("LIST"),className:"rounded-md",children:[" ","RFI Requests"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[" ",e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Total",value:f.length,icon:F,color:"#4f46e5"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Active",value:f.filter(s=>s.isActive).length,icon:xe,color:"#10b981"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Quality",value:f.filter(s=>s.category==="Quality").length,icon:Ye,color:"#8b5cf6"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Safety",value:f.filter(s=>s.isActive).length,icon:ue,color:"#ef4444"})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-background",children:[" ",e.jsxs(he,{children:[e.jsxs(pe,{className:"bg-muted",children:[" ",e.jsxs(k,{children:[e.jsx(a,{className:"font-bold",children:"Name"}),e.jsx(a,{className:"font-bold",children:"Category"}),e.jsx(a,{className:"font-bold",children:"Items Count"}),e.jsx(a,{className:"font-bold",children:"Status"}),e.jsx(a,{className:"font-bold",children:"Created"}),e.jsx(a,{align:"right",className:"font-bold",children:"Actions"})]})]}),e.jsxs(ge,{children:[f.map((s,t)=>e.jsxs(k,{className:"group hover:bg-muted",children:[" ",e.jsx(a,{className:"font-bold",children:s.name})," ",e.jsx(a,{children:e.jsx(b,{variant:"outline",className:v(s.category==="Quality"&&"border-primary text-primary",s.category==="Safety"&&"border-orange-500 text-orange-500",s.category==="Environmental"&&"border-gray-500 text-gray-500"),children:s.category})}),e.jsx(a,{children:s.items.length}),e.jsx(a,{children:e.jsx(b,{variant:"outline",className:v(s.isActive?"border-green-500 text-green-500":"border-gray-500 text-gray-500"),children:s.isActive?"Active":"Inactive"})}),e.jsx(a,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(a,{align:"right",children:e.jsxs("div",{className:"flex space-x-0 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[" ",e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Be(s),children:e.jsx(fe,{size:16})})," ",e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500",onClick:()=>qe(s.id),children:e.jsx(Q,{size:16})})," "]})})]},s.id)),W.map((s,t)=>e.jsxs(k,{className:"group hover:bg-muted",children:[" ",e.jsx(a,{className:"font-bold",children:s.name})," ",e.jsx(a,{children:e.jsx(b,{variant:"outline",className:v(s.category==="Quality"&&"border-primary text-primary",s.category==="Safety"&&"border-orange-500 text-orange-500",s.category==="Environmental"&&"border-gray-500 text-gray-500"),children:s.category})}),e.jsx(a,{children:"N/A (Template)"}),e.jsx(a,{children:e.jsxs(b,{variant:"outline",className:"border-blue-500 text-blue-500",children:[" ","Template"]})}),e.jsx(a,{children:"-"}),e.jsx(a,{align:"right",children:e.jsxs("div",{className:"flex space-x-0 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[" ",e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>{const m={id:`cl-${Date.now()}`,name:s.name,category:s.category,description:s.description,items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,applicableTo:["structure","task","site"]};y(m),j("CHECKLIST_UPDATE")},children:e.jsx(A,{size:16})})]})})]},`template-${s.id}`)),f.length===0&&W.length===0&&e.jsx(k,{children:e.jsxs(a,{colSpan:6,className:"text-center py-10",children:[" ",e.jsx("p",{className:"text-sm text-muted-foreground",children:"No checklists found."})]})})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end",children:[" ",e.jsxs(h,{onClick:oe,className:"rounded-md shadow-md",children:[e.jsx(A,{className:"mr-2"}),"Create New Checklist"]})]})]}):e.jsxs("div",{className:"animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-xl font-extrabold",children:"Technical Inspection & Quality Registry"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Verification of works against contract specifications"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(n,{htmlFor:"activity-filter",className:"sr-only",children:"Filter by Activity"}),e.jsxs(w,{value:B,onValueChange:is,children:[e.jsxs(T,{id:"activity-filter",className:"w-[220px]",children:[e.jsx(As,{size:14,className:"mr-2"}),e.jsx(I,{placeholder:"Filter by Activity"})]}),e.jsxs(E,{children:[e.jsx(o,{value:"all",children:"All Project Activities"}),e.jsx(_e,{}),r.schedule.map(s=>e.jsx(o,{value:s.id,children:s.name},s.id))]})]}),e.jsxs(h,{onClick:rs,children:[e.jsx(A,{size:16,className:"mr-2"})," New RFI"]})]})]}),e.jsx("div",{className:"border-b mb-6",children:e.jsx(Is,{value:H,onValueChange:s=>ls(s),children:e.jsxs(Es,{className:"grid w-full grid-cols-2 h-auto rounded-none p-0",children:[e.jsxs(Xe,{value:"0",className:"flex items-center gap-2",children:[e.jsx(me,{size:16})," Checklists"]}),e.jsxs(Xe,{value:"1",className:"flex items-center gap-2",children:[e.jsx(F,{size:16})," RFI Requests"]})]})})}),H==="0"&&e.jsxs("div",{className:"space-y-4",children:[" ",e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[" ",e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Total",value:f.length,icon:F,color:"#4f46e5"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Active",value:f.filter(s=>s.isActive).length,icon:xe,color:"#10b981"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Quality",value:f.filter(s=>s.category==="Quality").length,icon:Ye,color:"#8b5cf6"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Safety",value:f.filter(s=>s.isActive).length,icon:ue,color:"#ef4444"})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-background",children:[" ",e.jsxs(he,{children:[e.jsxs(pe,{className:"bg-muted",children:[" ",e.jsxs(k,{children:[e.jsx(a,{className:"font-bold",children:"Name"}),e.jsx(a,{className:"font-bold",children:"Category"}),e.jsx(a,{className:"font-bold",children:"Items Count"}),e.jsx(a,{className:"font-bold",children:"Status"}),e.jsx(a,{className:"font-bold",children:"Created"}),e.jsx(a,{align:"right",className:"font-bold",children:"Actions"})]})]}),e.jsxs(ge,{children:[f.map((s,t)=>e.jsxs(k,{className:"group hover:bg-muted",children:[" ",e.jsx(a,{className:"font-bold",children:s.name})," ",e.jsx(a,{children:e.jsx(b,{variant:"outline",className:v(s.category==="Quality"&&"border-primary text-primary",s.category==="Safety"&&"border-orange-500 text-orange-500",s.category==="Environmental"&&"border-gray-500 text-gray-500"),children:s.category})}),e.jsx(a,{children:s.items.length}),e.jsx(a,{children:e.jsx(b,{variant:"outline",className:v(s.isActive?"border-green-500 text-green-500":"border-gray-500 text-gray-500"),children:s.isActive?"Active":"Inactive"})}),e.jsx(a,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(a,{align:"right",children:e.jsxs("div",{className:"flex space-x-0 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[" ",e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>Be(s),children:e.jsx(fe,{size:16})})," ",e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500",onClick:()=>qe(s.id),children:e.jsx(Q,{size:16})})," "]})})]},s.id)),W.map((s,t)=>e.jsxs(k,{className:"group hover:bg-muted",children:[" ",e.jsx(a,{className:"font-bold",children:s.name})," ",e.jsx(a,{children:e.jsx(b,{variant:"outline",className:v(s.category==="Quality"&&"border-primary text-primary",s.category==="Safety"&&"border-orange-500 text-orange-500",s.category==="Environmental"&&"border-gray-500 text-gray-500"),children:s.category})}),e.jsx(a,{children:"N/A (Template)"}),e.jsx(a,{children:e.jsxs(b,{variant:"outline",className:"border-blue-500 text-blue-500",children:[" ","Template"]})}),e.jsx(a,{children:"-"}),e.jsx(a,{align:"right",children:e.jsxs("div",{className:"flex space-x-0 justify-end opacity-0 group-hover:opacity-100 transition-opacity",children:[" ",e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>{const m={id:`cl-${Date.now()}`,name:s.name,category:s.category,description:s.description,items:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,applicableTo:["structure","task","site"]};y(m),j("CHECKLIST_UPDATE")},children:e.jsx(A,{size:16})})]})})]},`template-${s.id}`)),f.length===0&&W.length===0&&e.jsx(k,{children:e.jsxs(a,{colSpan:6,className:"text-center py-10",children:[" ",e.jsx("p",{className:"text-sm text-muted-foreground",children:"No checklists found."})]})})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end",children:[" ",e.jsxs(h,{onClick:oe,className:"rounded-md shadow-md",children:[e.jsx(A,{className:"mr-2"}),"Create New Checklist"]})]})]}),H==="1"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[" ",e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Open",value:q[x.OPEN],icon:Ze,color:"#4f46e5"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Approved",value:q[x.APPROVED],icon:xe,color:"#10b981"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Rejected",value:q[x.REJECTED],icon:es,color:"#f43f5e"})]}),e.jsxs("div",{className:"col-span-1",children:[" ",e.jsx(N,{title:"Closed",value:q[x.CLOSED],icon:ue,color:"#64748b"})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-background",children:[" ",e.jsxs(he,{children:[e.jsxs(pe,{className:"bg-muted",children:[" ",e.jsxs(k,{children:[e.jsx(a,{className:"font-bold",children:"Ref #"}),e.jsx(a,{className:"font-bold",children:"Location"}),e.jsx(a,{className:"font-bold",children:"Type"}),e.jsx(a,{className:"font-bold",children:"Linked Activity"}),e.jsx(a,{className:"font-bold",children:"Work Scope"}),e.jsx(a,{className:"font-bold",children:"Status"}),e.jsx(a,{align:"right",className:"font-bold",children:"Actions"})]})]}),e.jsxs(ge,{children:[Oe.map((s,t)=>{const m=r.schedule.find(u=>u.id===s.linkedTaskId);return e.jsxs(k,{className:"group hover:bg-muted",children:[" ",e.jsx(a,{className:"font-bold text-primary font-mono",children:s.rfiNumber})," ",e.jsx(a,{className:"font-bold",children:s.location})," ",e.jsx(a,{children:s.inspectionType||"N/A"})," ",e.jsx(a,{children:m?e.jsx(fs,{children:e.jsxs(vs,{children:[e.jsx(bs,{asChild:!0,children:e.jsxs("div",{className:"min-w-[140px]",children:[" ",e.jsx("p",{className:"font-bold block leading-tight mb-0.5",children:m.name})," ",e.jsx(Je,{value:m.progress,className:"h-1.5 mt-0.5 rounded-full"})," "]})}),e.jsxs(Ns,{children:["Task Progress: ",m.progress,"%"]})]})}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"â€”"})}),e.jsx(a,{className:"max-w-[200px] overflow-hidden whitespace-nowrap text-ellipsis",children:s.description})," ",e.jsx(a,{children:e.jsx(b,{className:v("font-extrabold text-[9px] h-4",s.status===x.APPROVED&&"bg-green-100 text-green-800",s.status===x.REJECTED&&"bg-red-100 text-red-800",s.status===x.OPEN&&"bg-blue-100 text-blue-800"),children:s.status})}),e.jsx(a,{align:"right",children:e.jsxs("div",{className:"flex space-x-0 justify-end",children:[" ",e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>{ts(s),$(!0)},children:e.jsx(ys,{size:16})})," ",e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>cs(s),children:e.jsx(fe,{size:16})})," ",e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500",onClick:()=>ds(s.id),children:e.jsx(Q,{size:16})})," "]})})]},s.id)}),Oe.length===0&&e.jsx(k,{children:e.jsxs(a,{colSpan:7,className:"text-center py-10",children:[" ",e.jsx("p",{className:"text-sm text-muted-foreground",children:"No inspection requests found for this filter."})]})})]})]})]})]}),e.jsxs(ks,{open:as,onOpenChange:()=>$(!1),children:[" ",e.jsxs(Cs,{className:"max-w-4xl h-[90vh] flex flex-col p-0",children:[" ",e.jsxs(Ss,{className:"border-b border-muted p-4 flex-row justify-between items-center",children:[" ",e.jsxs("div",{className:"flex items-center gap-1.5",children:[" ",e.jsx(F,{size:24,className:"text-primary"})," ",e.jsxs("div",{children:[" ",e.jsx("h3",{className:"text-lg font-bold",children:"Technical Inspection Report"})," ",e.jsx("p",{className:"text-sm text-muted-foreground",children:l==null?void 0:l.rfiNumber})," "]})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>$(!1),children:e.jsx(de,{})})," "]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-0 bg-background",children:[" ",l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-0 h-full",children:[" ",e.jsxs("div",{className:"col-span-12 md:col-span-7 p-4 border-r border-muted",children:[" ",e.jsxs("div",{className:"flex flex-col gap-4",children:[" ",e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"INSPECTION DESCRIPTION"})," ",e.jsxs("div",{className:"border p-2 mt-1.5 bg-background rounded-md",children:[" ",e.jsx("p",{className:"text-sm leading-relaxed",children:l.description})," "]})]}),l.specificWorkDetails&&e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"SPECIFIC WORK DETAILS"})," ",e.jsxs("div",{className:"border p-2 mt-1.5 bg-background rounded-md",children:[" ",e.jsx("p",{className:"text-sm leading-relaxed",children:l.specificWorkDetails})," "]})]}),e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"WORKFLOW AUDIT TRAIL"})," ",e.jsxs("div",{className:"mt-2.5",children:[" ",l.workflowLog&&l.workflowLog.length>0?e.jsxs("div",{className:"flex flex-col",children:[" ",l.workflowLog.map((s,t)=>e.jsxs("div",{className:v("flex gap-2 relative",t===l.workflowLog.length-1?"pb-0":"pb-3"),children:[" ",t!==l.workflowLog.length-1&&e.jsx("div",{className:"absolute left-[15px] top-[32px] bottom-0 w-0.5 bg-border"}),e.jsxs(ws,{className:"w-8 h-8 bg-background border-2 border-border z-10 flex items-center justify-center",children:[" ",hs(s.stage)]}),e.jsxs("div",{className:"flex-1",children:[" ",e.jsxs("div",{className:"flex justify-between items-center",children:[" ",e.jsx("p",{className:"text-sm font-bold text-primary uppercase",children:s.stage})," ",e.jsxs("p",{className:"text-xs text-muted-foreground font-mono",children:[" ",new Date(s.timestamp).toLocaleString([],{dateStyle:"short",timeStyle:"short"})]})]}),e.jsxs("p",{className:"text-xs block text-primary font-bold",children:[" ","Action by: ",s.user]}),s.comments&&e.jsxs("div",{className:"bg-background p-1 rounded-sm border border-border mt-0.5",children:[" ",e.jsx("p",{className:"text-sm text-muted-foreground",children:s.comments})," "]})]})]},t))]}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No history recorded."})]})]})]})]}),e.jsxs("div",{className:"col-span-12 md:col-span-5 p-4 bg-muted",children:[" ",e.jsxs("div",{className:"flex flex-col gap-3",children:[" ",e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"LOCATION / CHAINAGE"})," ",e.jsxs("p",{className:"text-lg font-bold flex items-center gap-1 mt-1",children:[" ",e.jsx(Ue,{size:18,className:"text-primary"})," ",l.location," "]})]}),e.jsx(_e,{})," ",e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider block mb-1.5",children:"CURRENT STATUS"})," ",e.jsx(b,{className:v("font-bold h-10 rounded-md w-full justify-center",l.status===x.APPROVED&&"bg-green-100 text-green-800",l.status===x.REJECTED&&"bg-red-100 text-red-800",l.status===x.OPEN&&"bg-blue-100 text-blue-800"),children:l.status.toUpperCase()})]}),l.worksStatus&&e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider block mb-1.5",children:"WORKS STATUS"})," ",e.jsx(b,{className:v("font-bold h-10 rounded-md w-full justify-center",l.worksStatus==="Approved"&&"bg-green-100 text-green-800",l.worksStatus==="Approved as Noted"&&"bg-orange-100 text-orange-800",l.worksStatus==="Approved for Subsequent Work"&&"bg-blue-100 text-blue-800"),children:l.worksStatus})]}),e.jsxs("div",{className:"border p-2.5 rounded-xl bg-background",children:[" ",e.jsxs("p",{className:"text-xs font-bold text-muted-foreground flex items-center gap-1 mb-1.5 uppercase",children:[" ",e.jsx(Fs,{size:14})," SCHEDULE CONTEXT"]}),r.schedule.find(s=>s.id===l.linkedTaskId)?e.jsxs("div",{children:[" ",e.jsx("p",{className:"text-sm font-bold",children:(Me=r.schedule.find(s=>s.id===l.linkedTaskId))==null?void 0:Me.name})," ",e.jsxs("div",{className:"flex justify-between mt-1",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Task Progress"})," ",e.jsxs("p",{className:"text-xs font-bold",children:[(Ve=r.schedule.find(s=>s.id===l.linkedTaskId))==null?void 0:Ve.progress,"%"]})," "]}),e.jsx(Je,{value:(($e=r.schedule.find(s=>s.id===l.linkedTaskId))==null?void 0:$e.progress)||0,className:"h-1.5 mt-0.5 rounded-full"})," "]}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Not linked to a schedule task."})]}),e.jsxs("div",{className:"border p-2.5 rounded-xl bg-background",children:[" ",e.jsxs("p",{className:"text-xs font-bold text-muted-foreground flex items-center gap-1 mb-1.5 uppercase",children:[" ",e.jsx(D,{size:14})," SIGNATURES"]}),e.jsxs("div",{children:[" ",e.jsxs("div",{className:"flex justify-between",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"ARE/IOW:"})," ",e.jsx("p",{className:"text-sm font-bold",children:l.areSignature||"N/A"})," "]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"ME/SLT:"})," ",e.jsx("p",{className:"text-sm font-bold",children:l.meSltSignature||"N/A"})," "]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"IOW:"})," ",e.jsx("p",{className:"text-sm font-bold",children:l.iowSignature||"N/A"})," "]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"RE:"})," ",e.jsx("p",{className:"text-sm font-bold",children:l.reSignature||"N/A"})," "]})]})]}),e.jsxs("div",{className:"border p-2.5 rounded-xl bg-background",children:[" ",e.jsxs("p",{className:"text-xs font-bold text-muted-foreground flex items-center gap-1 mb-1.5 uppercase",children:[" ",e.jsx(D,{size:14})," PERSONNEL"]}),e.jsxs("div",{children:[" ",e.jsxs("div",{className:"flex justify-between",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Submitted By:"})," ",e.jsx("p",{className:"text-sm font-bold",children:l.submittedBy||"N/A"})," "]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[" ",e.jsx("p",{className:"text-xs text-muted-foreground",children:"Received By:"})," ",e.jsx("p",{className:"text-sm font-bold",children:l.receivedBy||"N/A"})," "]})]})]}),e.jsxs("div",{className:"border p-2.5 rounded-xl bg-background",children:[" ",e.jsxs("p",{className:"text-xs font-bold text-muted-foreground flex items-center gap-1 mb-1.5 uppercase",children:[" ",e.jsx(me,{size:14})," LINKED CHECKLISTS"]}),l.linkedChecklistIds&&l.linkedChecklistIds.length>0?e.jsxs("div",{children:[" ",l.linkedChecklistIds.map(s=>{var m;const t=(m=r.checklists)==null?void 0:m.find(u=>u.id===s);return t?e.jsxs("div",{className:"mb-1",children:[" ",e.jsx("p",{className:"text-sm font-bold",children:t.name})," ",e.jsx("p",{className:"text-xs text-muted-foreground",children:t.category})," "]},s):null})]}):e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No checklists linked to this RFI."})]}),e.jsxs(h,{className:"w-full rounded-md shadow-md h-12 mt-2",children:[" ",e.jsx(Rs,{className:"mr-2"})," Print Certificate"]})]})]})]})]})]})]})]})};export{Ys as default};
