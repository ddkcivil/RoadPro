import{c as z,r as f,j as e,B as i,a$ as K,n as j,o as p,p as u,t as N,$,P as w,v as C,w as S,x as o,y as r,z as k,A as a,O as T,a0 as G,a1 as W,a2 as V,D as L,e as D,f as R,h as E,i as I,K as c,I as d,k as P,a8 as A}from"./index-CewaSTRD.js";import{D as Q}from"./droplets-CO2bCLy5.js";import{S as F}from"./save-CV1km07e.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=z("Wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),Z=({project:v,onProjectUpdate:y})=>{const[x,b]=f.useState("TREES"),[M,h]=f.useState(!1),[O,g]=f.useState(!1),l=v.environmentRegistry||{treesRemoved:0,treesPlanted:0,treeLogs:[],sprinklingLogs:[],airQualityLogs:[]},n={removed:0,planted:0,target:0};for(const s of l.treeLogs)n.removed+=s.removedCount||0,n.planted+=s.plantedCount||0,n.target+=s.targetPlant||0;const H=s=>{s.preventDefault();const t=new FormData(s.currentTarget),m=Number(t.get("removed"));t.get("location");const B={id:`tree-${Date.now()}`,chainage:t.get("chainage"),species:t.get("species"),location:t.get("location")||"Unknown",action:"Removed",count:m,removedCount:m,plantedCount:0,targetPlant:m*10,date:new Date().toISOString().split("T")[0]};y({...v,environmentRegistry:{...l,treeLogs:[...l.treeLogs,B]}}),h(!1)},q=s=>{s.preventDefault();const t=new FormData(s.currentTarget),m={id:`sprinkle-${Date.now()}`,date:t.get("date"),area:t.get("location"),volume:Number(t.get("volume")),unit:"liters",operator:t.get("operator")};y({...v,environmentRegistry:{...l,sprinklingLogs:[...l.sprinklingLogs,m]}}),g(!1)};return e.jsxs("div",{className:"p-4 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex justify-between mb-6 items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Environmental Compliance"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Safeguard monitoring per project EMP guidelines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:x==="TREES"?"default":"outline",onClick:()=>b("TREES"),children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Tree Replacement"]}),e.jsxs(i,{variant:x==="SPRINKLING"?"default":"outline",onClick:()=>b("SPRINKLING"),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"})," Dust Suppression"]})]})]}),x==="TREES"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"col-span-1 bg-green-50",children:[e.jsx(p,{children:e.jsx(u,{className:"text-sm font-black text-green-700 uppercase tracking-wide",children:"Compensatory Plantation (1:10)"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex justify-between items-baseline mb-2",children:[e.jsx("span",{className:"text-4xl font-bold text-green-800",children:n.planted}),e.jsxs("span",{className:"text-lg text-gray-500",children:["/ ",n.target]})]}),e.jsx($,{value:n.target>0?n.planted/n.target*100:0,className:"h-2",indicatorColor:"bg-green-600"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Based on ",n.removed," trees cleared along the alignment."]})]})]}),e.jsxs(j,{className:"col-span-2",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-lg font-semibold",children:"Removal & Plantation Ledger"}),e.jsxs(i,{size:"sm",onClick:()=>h(!0),children:[e.jsx(w,{className:"mr-2 h-4 w-4"})," Log Clearing"]})]}),e.jsx(N,{children:e.jsxs(C,{children:[e.jsx(S,{children:e.jsxs(o,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Location (Ch)"}),e.jsx(r,{children:"Species"}),e.jsx(r,{className:"text-right",children:"Cleared"}),e.jsx(r,{className:"text-right",children:"Target"}),e.jsx(r,{className:"text-right",children:"Planted"})]})}),e.jsx(k,{children:l.treeLogs.length>0?l.treeLogs.map(s=>e.jsxs(o,{children:[e.jsx(a,{children:s.date}),e.jsx(a,{className:"font-bold",children:s.chainage}),e.jsx(a,{children:s.species}),e.jsxs(a,{className:"text-right text-red-600",children:["-",s.removedCount]}),e.jsx(a,{className:"text-right",children:s.targetPlant}),e.jsx(a,{className:"text-right text-green-600 font-bold",children:s.plantedCount})]},s.id)):e.jsx(o,{children:e.jsx(a,{colSpan:6,className:"text-center py-8 text-gray-400",children:"No tree clearing logs recorded."})})})]})})]})]}),x==="SPRINKLING"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"col-span-1",children:[e.jsx(p,{children:e.jsx(u,{className:"text-sm font-black text-primary uppercase tracking-wide",children:"Daily Target Monitor"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("p",{className:"text-sm",children:"Today's Logs"}),e.jsx(T,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"2/3"})]}),e.jsxs(G,{variant:"default",className:"bg-yellow-50 border-yellow-200 text-yellow-800",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx(W,{children:"Dry conditions reported"}),e.jsx(V,{children:"Ensure 3rd sprinkling cycle is completed at high-traffic zones."})]})]})]}),e.jsxs(j,{className:"col-span-2",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-lg font-semibold",children:"Water Sprinkling History"}),e.jsxs(i,{size:"sm",onClick:()=>g(!0),children:[e.jsx(w,{className:"mr-2 h-4 w-4"})," Record Cycle"]})]}),e.jsx(N,{children:e.jsxs(C,{children:[e.jsx(S,{children:e.jsxs(o,{children:[e.jsx(r,{children:"Date"}),e.jsx(r,{children:"Cycle"}),e.jsx(r,{children:"Section Covered"}),e.jsx(r,{children:"Bowser Ref"})]})}),e.jsx(k,{children:l.sprinklingLogs.length>0?l.sprinklingLogs.map(s=>e.jsxs(o,{children:[e.jsx(a,{children:s.date}),e.jsx(a,{children:e.jsx(T,{variant:"outline",children:s.time||"N/A"})}),e.jsx(a,{className:"font-bold",children:s.location||"N/A"}),e.jsx(a,{children:s.bowserId||"N/A"})]},s.id)):e.jsx(o,{children:e.jsx(a,{colSpan:4,className:"text-center py-8 text-gray-400",children:"No sprinkling cycles logged today."})})})]})})]})]}),e.jsx(L,{open:M,onOpenChange:h,children:e.jsxs(D,{className:"sm:max-w-md",asChild:!1,children:[e.jsxs(R,{children:[e.jsx(E,{children:"Log Tree Clearing"}),e.jsx(I,{children:"Record details of tree removal for compensatory plantation tracking."})]}),e.jsxs("form",{onSubmit:H,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"chainage",className:"text-right",children:"Location (Ch)"}),e.jsx(d,{id:"chainage",name:"chainage",className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"species",className:"text-right",children:"Tree Species"}),e.jsx(d,{id:"species",name:"species",className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"removed",className:"text-right",children:"Trees Removed"}),e.jsx(d,{id:"removed",name:"removed",type:"number",min:"0",className:"col-span-3",required:!0}),e.jsx("p",{className:"col-span-4 text-sm text-muted-foreground text-right",children:"System will auto-calculate 1:10 target."})]}),e.jsxs(P,{children:[e.jsxs(i,{variant:"outline",onClick:()=>h(!1),children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Cancel"]}),e.jsxs(i,{type:"submit",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Commit Registry"]})]})]})]})}),e.jsx(L,{open:O,onOpenChange:g,children:e.jsxs(D,{className:"sm:max-w-md",asChild:!1,children:[e.jsxs(R,{children:[e.jsx(E,{children:"Record Sprinkling Cycle"}),e.jsx(I,{children:"Log water sprinkling activities for dust suppression."})]}),e.jsxs("form",{onSubmit:q,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"date",className:"text-right",children:"Date"}),e.jsx(d,{id:"date",name:"date",type:"date",defaultValue:new Date().toISOString().split("T")[0],className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"location",className:"text-right",children:"Section Covered"}),e.jsx(d,{id:"location",name:"location",className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"volume",className:"text-right",children:"Volume (Liters)"}),e.jsx(d,{id:"volume",name:"volume",type:"number",min:"0",className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(c,{htmlFor:"operator",className:"text-right",children:"Operator"}),e.jsx(d,{id:"operator",name:"operator",className:"col-span-3",required:!0})]}),e.jsxs(P,{children:[e.jsxs(i,{variant:"outline",onClick:()=>g(!1),children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Cancel"]}),e.jsxs(i,{type:"submit",children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Save Cycle"]})]})]})]})})]})};export{Z as default};
