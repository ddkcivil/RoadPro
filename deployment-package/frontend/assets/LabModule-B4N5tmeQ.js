import{c as te,r as d,j as e,aj as Be,R as C,ar as ze,al as ye,aO as Ue,am as We,as as qe,an as Ge,M as ae,aP as Ke,B as S,n as k,t as B,ah as z,aw as Qe,$ as Je,m as ce,I as D,V as L,W as F,X as $,Y as H,Z as T,a0 as de,a1 as me,a2 as xe,u as ue,v as Xe,w as Ye,x as K,y as E,z as Ze,A as M,O as he,ab as es,T as ss,E as ts,F as as,H as rs,ag as ns,D as ls,e as os,f as is,h as cs,k as ds}from"./index-CewaSTRD.js";import{T as ms,a as xs,b as Q,c as J}from"./tabs-b2piEQ7z.js";import{R as us,T as hs,C as ps,c as Ae}from"./index-DhkzDPUm.js";import{H as pe}from"./history-DhVPXOxI.js";import{P as ge}from"./printer-DtXb5IMq.js";import{S as je}from"./shield-check-BgAnWJJY.js";import{C as fe}from"./circle-check-ClQeHiCK.js";import{M as gs}from"./microscope-DQTHM8ZW.js";import{F as ve}from"./filter-BSFQ0ETk.js";import{T as Ne}from"./triangle-alert-DCByPDj1.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=te("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=te("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=te("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);function fs(t,r=[]){let a=[];function n(l,c){const i=d.createContext(c),x=a.length;a=[...a,c];const p=h=>{var b;const{scope:v,children:u,...A}=h,m=((b=v==null?void 0:v[t])==null?void 0:b[x])||i,j=d.useMemo(()=>A,Object.values(A));return e.jsx(m.Provider,{value:j,children:u})};p.displayName=l+"Provider";function g(h,v){var m;const u=((m=v==null?void 0:v[t])==null?void 0:m[x])||i,A=d.useContext(u);if(A)return A;if(c!==void 0)return c;throw new Error(`\`${h}\` must be used within \`${l}\``)}return[p,g]}const o=()=>{const l=a.map(c=>d.createContext(c));return function(i){const x=(i==null?void 0:i[t])||l;return d.useMemo(()=>({[`__scope${t}`]:{...i,[t]:x}}),[i,x])}};return o.scopeName=t,[n,vs(o,...r)]}function vs(...t){const r=t[0];if(t.length===1)return r;const a=()=>{const n=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=n.reduce((i,{useScope:x,scopeName:p})=>{const h=x(l)[`__scope${p}`];return{...i,...h}},{});return d.useMemo(()=>({[`__scope${r.scopeName}`]:c}),[c])}};return a.scopeName=r.scopeName,a}function Ns(t){const r=Cs(t),a=d.forwardRef((n,o)=>{const{children:l,...c}=n,i=d.Children.toArray(l),x=i.find(ws);if(x){const p=x.props.children,g=i.map(h=>h===x?d.Children.count(p)>1?d.Children.only(null):d.isValidElement(p)?p.props.children:null:h);return e.jsx(r,{...c,ref:o,children:d.isValidElement(p)?d.cloneElement(p,void 0,g):null})}return e.jsx(r,{...c,ref:o,children:l})});return a.displayName=`${t}.Slot`,a}function Cs(t){const r=d.forwardRef((a,n)=>{const{children:o,...l}=a;if(d.isValidElement(o)){const c=As(o),i=ys(l,o.props);return o.type!==d.Fragment&&(i.ref=n?Be(n,c):c),d.cloneElement(o,i)}return d.Children.count(o)>1?d.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var bs=Symbol("radix.slottable");function ws(t){return d.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bs}function ys(t,r){const a={...r};for(const n in r){const o=t[n],l=r[n];/^on[A-Z]/.test(n)?o&&l?a[n]=(...i)=>{const x=l(...i);return o(...i),x}:o&&(a[n]=o):n==="style"?a[n]={...o,...l}:n==="className"&&(a[n]=[o,l].filter(Boolean).join(" "))}return{...t,...a}}function As(t){var n,o;let r=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?t.ref:(r=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Ss=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Se=Ss.reduce((t,r)=>{const a=Ns(`Primitive.${r}`),n=d.forwardRef((o,l)=>{const{asChild:c,...i}=o,x=c?a:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(x,{...i,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),y="Accordion",Is=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[re,Ts,Rs]=ze(y),[W]=fs(y,[Rs,Ae]),ne=Ae(),Ie=C.forwardRef((t,r)=>{const{type:a,...n}=t,o=n,l=n;return e.jsx(re.Provider,{scope:t.__scopeAccordion,children:a==="multiple"?e.jsx(Ms,{...l,ref:r}):e.jsx(Ds,{...o,ref:r})})});Ie.displayName=y;var[Te,Ps]=W(y),[Re,ks]=W(y,{collapsible:!1}),Ds=C.forwardRef((t,r)=>{const{value:a,defaultValue:n,onValueChange:o=()=>{},collapsible:l=!1,...c}=t,[i,x]=ye({prop:a,defaultProp:n??"",onChange:o,caller:y});return e.jsx(Te,{scope:t.__scopeAccordion,value:C.useMemo(()=>i?[i]:[],[i]),onItemOpen:x,onItemClose:C.useCallback(()=>l&&x(""),[l,x]),children:e.jsx(Re,{scope:t.__scopeAccordion,collapsible:l,children:e.jsx(Pe,{...c,ref:r})})})}),Ms=C.forwardRef((t,r)=>{const{value:a,defaultValue:n,onValueChange:o=()=>{},...l}=t,[c,i]=ye({prop:a,defaultProp:n??[],onChange:o,caller:y}),x=C.useCallback(g=>i((h=[])=>[...h,g]),[i]),p=C.useCallback(g=>i((h=[])=>h.filter(v=>v!==g)),[i]);return e.jsx(Te,{scope:t.__scopeAccordion,value:c,onItemOpen:x,onItemClose:p,children:e.jsx(Re,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(Pe,{...l,ref:r})})})}),[Es,q]=W(y),Pe=C.forwardRef((t,r)=>{const{__scopeAccordion:a,disabled:n,dir:o,orientation:l="vertical",...c}=t,i=C.useRef(null),x=We(i,r),p=Ts(a),h=qe(o)==="ltr",v=Ge(t.onKeyDown,u=>{var _;if(!Is.includes(u.key))return;const A=u.target,m=p().filter(s=>{var f;return!((f=s.ref.current)!=null&&f.disabled)}),j=m.findIndex(s=>s.ref.current===A),b=m.length;if(j===-1)return;u.preventDefault();let N=j;const w=0,R=b-1,P=()=>{N=j+1,N>R&&(N=w)},V=()=>{N=j-1,N<w&&(N=R)};switch(u.key){case"Home":N=w;break;case"End":N=R;break;case"ArrowRight":l==="horizontal"&&(h?P():V());break;case"ArrowDown":l==="vertical"&&P();break;case"ArrowLeft":l==="horizontal"&&(h?V():P());break;case"ArrowUp":l==="vertical"&&V();break}const G=N%b;(_=m[G].ref.current)==null||_.focus()});return e.jsx(Es,{scope:a,disabled:n,direction:o,orientation:l,children:e.jsx(re.Slot,{scope:a,children:e.jsx(Se.div,{...c,"data-orientation":l,ref:x,onKeyDown:n?void 0:v})})})}),U="AccordionItem",[Vs,le]=W(U),ke=C.forwardRef((t,r)=>{const{__scopeAccordion:a,value:n,...o}=t,l=q(U,a),c=Ps(U,a),i=ne(a),x=Ue(),p=n&&c.value.includes(n)||!1,g=l.disabled||t.disabled;return e.jsx(Vs,{scope:a,open:p,disabled:g,triggerId:x,children:e.jsx(us,{"data-orientation":l.orientation,"data-state":Oe(p),...i,...o,ref:r,disabled:g,open:p,onOpenChange:h=>{h?c.onItemOpen(n):c.onItemClose(n)}})})});ke.displayName=U;var De="AccordionHeader",Me=C.forwardRef((t,r)=>{const{__scopeAccordion:a,...n}=t,o=q(y,a),l=le(De,a);return e.jsx(Se.h3,{"data-orientation":o.orientation,"data-state":Oe(l.open),"data-disabled":l.disabled?"":void 0,...n,ref:r})});Me.displayName=De;var Y="AccordionTrigger",Ee=C.forwardRef((t,r)=>{const{__scopeAccordion:a,...n}=t,o=q(y,a),l=le(Y,a),c=ks(Y,a),i=ne(a);return e.jsx(re.ItemSlot,{scope:a,children:e.jsx(hs,{"aria-disabled":l.open&&!c.collapsible||void 0,"data-orientation":o.orientation,id:l.triggerId,...i,...n,ref:r})})});Ee.displayName=Y;var Ve="AccordionContent",_e=C.forwardRef((t,r)=>{const{__scopeAccordion:a,...n}=t,o=q(y,a),l=le(Ve,a),c=ne(a);return e.jsx(ps,{role:"region","aria-labelledby":l.triggerId,"data-orientation":o.orientation,...c,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});_e.displayName=Ve;function Oe(t){return t?"open":"closed"}var _s=Ie,Os=ke,Ls=Me,Le=Ee,Fe=_e;const we=_s,Z=d.forwardRef(({className:t,...r},a)=>e.jsx(Os,{ref:a,className:ae("border-b",t),...r}));Z.displayName="AccordionItem";const ee=d.forwardRef(({className:t,children:r,...a},n)=>e.jsx(Ls,{className:"flex",children:e.jsxs(Le,{ref:n,className:ae("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...a,children:[r,e.jsx(Ke,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ee.displayName=Le.displayName;const se=d.forwardRef(({className:t,children:r,...a},n)=>e.jsx(Fe,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e.jsx("div",{className:ae("pb-4 pt-0",t),children:r})}));se.displayName=Fe.displayName;const X={Soil:[{name:"Field Dry Density (FDD)",code:"FDD",parameters:["Degree of Compaction (%)","Moisture Content (%)"],limit:95,unit:"%"},{name:"CBR Test",code:"CBR",parameters:["CBR Value (%)"],limit:8,unit:"%"}],Aggregate:[{name:"Aggregate Impact Value",code:"AIV",parameters:["AIV (%)"],limit:30,unit:"%",inverse:!0},{name:"Los Angeles Abrasion",code:"LAA",parameters:["Loss (%)"],limit:40,unit:"%",inverse:!0}],Concrete:[{name:"Compressive Strength (7d)",code:"CUB7",parameters:["Strength (MPa)"],limit:17,unit:"MPa"},{name:"Compressive Strength (28d)",code:"CUB28",parameters:["Strength (MPa)"],limit:25,unit:"MPa"},{name:"Slump Test",code:"SLMP",parameters:["Slump Value (mm)"],limit:75,unit:"mm"}],Bitumen:[{name:"Binder Content",code:"BEXT",parameters:["Bitumen (%)"],limit:5,unit:"%"},{name:"Penetration Test",code:"PENE",parameters:["Pen (mm/10)"],limit:60,unit:"mm/10"}]},Qs=({project:t,userRole:r,onProjectUpdate:a})=>{var _;const[n,o]=d.useState("test-entry"),[l,c]=d.useState(""),[i,x]=d.useState(!1),[p,g]=d.useState(!1),[h,v]=d.useState("Soil"),[u,A]=d.useState(null),[m,j]=d.useState({sampleId:"",location:"",date:new Date().toISOString().split("T")[0],assetId:"",technicianId:"",testData:{}}),[b,N]=d.useState({description:"",location:"",severity:"Medium",linkedTestId:""}),w=t.labTests||[],R=d.useMemo(()=>{const s=w.length,f=w.filter(O=>O.result==="Pass").length,I=w.filter(O=>O.result==="Fail").length,oe=s>0?Math.round(f/s*100):100;return{total:s,passed:f,failed:I,passRate:oe}},[w]),P=d.useMemo(()=>w.filter(s=>s.testName.toLowerCase().includes(l.toLowerCase())||s.sampleId.toLowerCase().includes(l.toLowerCase())||s.location.toLowerCase().includes(l.toLowerCase())).sort((s,f)=>new Date(f.date).getTime()-new Date(s.date).getTime()),[w,l]),V=()=>{var ie;if(!m.sampleId||!u)return;const s=Object.values(m.testData)[0]||0,f=u.inverse?s<=u.limit:s>=u.limit,I=localStorage.getItem("roadmaster-users"),O=((ie=(I?JSON.parse(I):[]).find(He=>He.id===m.technicianId))==null?void 0:ie.name)||r,$e={id:`LAB-${Date.now()}`,testName:u.name,category:h,sampleId:m.sampleId,date:m.date,location:m.location,result:f?"Pass":"Fail",assetId:m.assetId,testData:m.testData,calculatedValue:`${s} ${u.unit}`,standardLimit:`${u.limit} ${u.unit}`,technician:O};a({...t,labTests:[...w,$e]}),o("historical-logs"),g(!0),j({...m,sampleId:"",location:"",testData:{}})},G=s=>{N({description:`Quality Failure: ${s.testName} at ${s.location}. Value recorded was ${s.calculatedValue} against requirement of ${s.standardLimit}.`,location:s.location,severity:"High",linkedTestId:s.id}),x(!0)};return e.jsxs("div",{className:"p-4 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex justify-between mb-6 items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-primary uppercase tracking-wider mb-1",children:"Material Assurance"}),e.jsx("h1",{className:"text-3xl font-black text-gray-800 tracking-tight",children:"Lab Registry & Quality Control"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{variant:"outline",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"})," Monthly Register"]}),e.jsxs(S,{children:[e.jsx(ge,{className:"mr-2 h-4 w-4"})," Export Certificate"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(k,{className:"border-l-4 border-l-indigo-600",children:e.jsxs(B,{className:"flex items-center space-x-4 p-4",children:[e.jsx(z,{className:"h-12 w-12 bg-indigo-100 text-indigo-600",children:e.jsx(Qe,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase",children:"Total Tests"}),e.jsx("p",{className:"text-3xl font-extrabold text-foreground",children:R.total})]})]})}),e.jsx(k,{className:"border-l-4 border-l-green-600",children:e.jsxs(B,{className:"flex items-center space-x-4 p-4",children:[e.jsx(z,{className:"h-12 w-12 bg-green-100 text-green-600",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase",children:"Pass Rate"}),e.jsxs("p",{className:"text-3xl font-extrabold text-green-600",children:[R.passRate,"%"]}),e.jsx(Je,{value:R.passRate,className:"h-2 mt-2",indicatorColor:"bg-green-600"})]})]})}),e.jsx(k,{className:"border-l-4 border-l-red-600",children:e.jsxs(B,{className:"flex items-center space-x-4 p-4",children:[e.jsx(z,{className:"h-12 w-12 bg-red-100 text-red-600",children:e.jsx(be,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase",children:"Critical Fails"}),e.jsx("p",{className:"text-3xl font-extrabold text-red-600",children:R.failed})]})]})}),e.jsx(k,{className:"border-l-4 border-l-blue-600",children:e.jsxs(B,{className:"flex items-center space-x-4 p-4",children:[e.jsx(z,{className:"h-12 w-12 bg-blue-100 text-blue-600",children:e.jsx(Ce,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase",children:"QA Status"}),e.jsx("p",{className:"text-3xl font-extrabold text-foreground",children:"Healthy"})]})]})})]}),e.jsx(k,{children:e.jsxs(ms,{value:n,onValueChange:o,children:[e.jsxs(xs,{className:"grid w-full grid-cols-3 h-12",children:[e.jsxs(Q,{value:"test-entry",children:[e.jsx(js,{className:"mr-2 h-4 w-4"})," Test Entry"]}),e.jsxs(Q,{value:"historical-logs",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"})," Historical Logs"]}),e.jsxs(Q,{value:"material-trends",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"})," Material Trends"]})]}),e.jsx(J,{value:"test-entry",className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(we,{type:"single",collapsible:!0,defaultValue:"item-1",className:"col-span-1",children:e.jsxs(Z,{value:"item-1",children:[e.jsx(ee,{className:"bg-muted/50 px-4 py-3 text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Sample Context"}),e.jsxs(se,{className:"p-4 grid gap-4",children:[e.jsx(D,{label:"Batch / Sample ID",placeholder:"e.g. CONC/322/2024",value:m.sampleId,onChange:s=>j({...m,sampleId:s.target.value})}),e.jsx(D,{label:"Chainage / GPS Location",value:m.location,onChange:s=>j({...m,location:s.target.value})}),e.jsxs(L,{value:m.assetId,onValueChange:s=>j({...m,assetId:s}),children:[e.jsx(F,{children:e.jsx($,{placeholder:"Target Asset"})}),e.jsxs(H,{children:[e.jsx(T,{value:"",children:"General / Alignment"}),(t.structures||[]).map(s=>e.jsx(T,{value:s.id,children:s.name},s.id))]})]}),e.jsxs(L,{value:m.technicianId,onValueChange:s=>j({...m,technicianId:s}),children:[e.jsx(F,{children:e.jsx($,{placeholder:"Assigned Technician"})}),e.jsx(H,{children:(()=>{const s=localStorage.getItem("roadmaster-users");return(s?JSON.parse(s):[]).map(I=>e.jsxs(T,{value:I.id,children:[I.name," (",I.role,")"]},I.id))})()})]}),e.jsx(D,{label:"Testing Date",type:"date",value:m.date,onChange:s=>j({...m,date:s.target.value})})]})]})}),e.jsx(we,{type:"single",collapsible:!0,defaultValue:"item-1",className:"col-span-2",children:e.jsxs(Z,{value:"item-1",children:[e.jsx(ee,{className:"bg-muted/50 px-4 py-3 text-sm font-bold uppercase tracking-wider text-muted-foreground",children:"Engineering Protocol"}),e.jsxs(se,{className:"p-4 grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(L,{value:h,onValueChange:s=>{v(s),A(null)},children:[e.jsx(F,{children:e.jsx($,{placeholder:"Material Class"})}),e.jsx(H,{children:Object.keys(X).map(s=>e.jsx(T,{value:s,children:s},s))})]}),e.jsxs(L,{value:(u==null?void 0:u.name)||"",onValueChange:s=>A(X[h].find(f=>f.name===s)),children:[e.jsx(F,{children:e.jsx($,{placeholder:"Test Standard"})}),e.jsx(H,{children:X[h].map(s=>e.jsx(T,{value:s.name,children:s.name},s.name))})]})]}),u?e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(de,{children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx(me,{children:"Verification Limit"}),e.jsxs(xe,{children:["For ",e.jsx("strong",{children:u.name}),", the limit is ",e.jsxs("strong",{children:[u.inverse?"Maximum":"Minimum"," ",u.limit,u.unit]}),"."]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:u.parameters.map(s=>e.jsx(D,{label:s,type:"number",value:m.testData[s]||"",onChange:f=>j({...m,testData:{...m.testData,[s]:Number(f.target.value)}}),suffix:u.unit},s))}),e.jsxs(S,{size:"lg",onClick:V,disabled:!m.sampleId||Object.keys(m.testData).length===0,className:"w-full",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"})," Certify & Record Result"]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(gs,{className:"mx-auto h-16 w-16 opacity-20 mb-3"}),e.jsx("p",{className:"font-medium",children:"Select a material and test standard to input field observations."})]})]})]})})]})}),e.jsxs(J,{value:"historical-logs",className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[e.jsxs("div",{className:"relative w-96",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search by ID, location or test type...",value:l,onChange:s=>c(s.target.value),className:"pl-10"})]}),e.jsxs(S,{variant:"outline",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"})," Filter Results"]})]}),e.jsx(k,{children:e.jsxs(Xe,{children:[e.jsx(Ye,{children:e.jsxs(K,{children:[e.jsx(E,{children:"Sample / Technical Ref"}),e.jsx(E,{children:"Test Classification"}),e.jsx(E,{children:"Location"}),e.jsx(E,{children:"Value"}),e.jsx(E,{children:"Status"}),e.jsx(E,{className:"text-right",children:"Actions"})]})}),e.jsx(Ze,{children:P.length>0?P.map(s=>e.jsxs(K,{children:[e.jsxs(M,{children:[e.jsx("p",{className:"font-extrabold text-indigo-600 font-mono",children:s.sampleId}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.date})]}),e.jsxs(M,{children:[e.jsx("p",{className:"font-bold",children:s.testName}),e.jsx(he,{variant:"outline",className:"h-4 text-xs font-black uppercase mt-1",children:s.category})]}),e.jsx(M,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(es,{className:"h-3 w-3"})," ",s.location]})}),e.jsxs(M,{children:[e.jsx("p",{className:"font-extrabold font-mono",children:s.calculatedValue}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Req: ",s.standardLimit]})]}),e.jsx(M,{children:e.jsx(he,{variant:s.result==="Pass"?"default":"destructive",className:"font-extrabold text-xs w-20 justify-center",children:s.result.toUpperCase()})}),e.jsx(M,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[s.result==="Fail"&&e.jsx(ss,{children:e.jsxs(ts,{children:[e.jsx(as,{asChild:!0,children:e.jsx(S,{variant:"outline",size:"icon",onClick:()=>G(s),children:e.jsx(Ne,{className:"h-4 w-4 text-red-600"})})}),e.jsx(rs,{children:"Initiate NCR"})]})}),e.jsx(S,{variant:"ghost",size:"icon",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"icon",children:e.jsx(ge,{className:"h-4 w-4"})})]})})]},s.id)):e.jsx(K,{children:e.jsxs(M,{colSpan:6,className:"h-48 text-center text-muted-foreground",children:[e.jsx(Ce,{className:"mx-auto h-12 w-12 text-slate-200 mb-2"}),"No test records matching your query."]})})})]})})]}),e.jsxs(J,{value:"material-trends",className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-4 items-center",children:[e.jsxs("div",{className:"relative w-96",children:[e.jsx(ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search trends...",value:l,onChange:s=>c(s.target.value),className:"pl-10"})]}),e.jsxs(S,{variant:"outline",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"})," Filter Trends"]})]}),e.jsx(k,{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(ce,{className:"mx-auto h-16 w-16 text-slate-200 mb-4"}),e.jsx("h3",{className:"text-lg font-bold",children:"Material Performance Analytics"}),e.jsx("p",{className:"text-sm max-w-sm mx-auto mt-2",children:"Aggregated trends for concrete strength and soil compaction will appear here as more data points are logged."})]})})]})]})}),e.jsx(ls,{open:i,onOpenChange:x,children:e.jsxs(os,{className:"sm:max-w-md",children:[e.jsx(is,{className:"bg-red-600 text-white p-4 rounded-t-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-6 w-6"}),e.jsx(cs,{className:"text-xl font-bold",children:"Initiate Non-Conformance Report"})]})}),e.jsxs("div",{className:"p-4 grid gap-4",children:[e.jsxs(de,{variant:"destructive",children:[e.jsx(Ne,{className:"h-4 w-4"}),e.jsx(me,{children:"Linked to Failed Sample"}),e.jsxs(xe,{children:["This NCR is linked to failed sample ",e.jsx("b",{children:(_=P.find(s=>s.id===b.linkedTestId))==null?void 0:_.sampleId}),"."]})]}),e.jsx(D,{label:"Deviation Description",multiline:!0,rows:3,value:b.description,onChange:s=>N({...b,description:s.target.value})}),e.jsxs(L,{value:b.severity,onValueChange:s=>N({...b,severity:s}),children:[e.jsx(F,{children:e.jsx($,{placeholder:"Risk Severity"})}),e.jsxs(H,{children:[e.jsx(T,{value:"Low",children:"Low - Rectifiable"}),e.jsx(T,{value:"Medium",children:"Medium - Correction Required"}),e.jsx(T,{value:"High",children:"High - Structural Concern"}),e.jsx(T,{value:"Critical",children:"Critical - Immediate Rejection"})]})]})]}),e.jsxs(ds,{children:[e.jsx(S,{variant:"outline",onClick:()=>x(!1),children:"Discard"}),e.jsxs(S,{variant:"destructive",onClick:()=>{x(!1),g(!0)},children:[e.jsx(fe,{className:"mr-2 h-4 w-4"})," Issue NCR Draft"]})]})]})})]})};export{Qs as default};
